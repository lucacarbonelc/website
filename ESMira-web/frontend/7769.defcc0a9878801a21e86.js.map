{"version":3,"file":"7769.defcc0a9878801a21e86.js","mappings":"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","sources":["webpack://ESMira/./src/frontend/ts/widgets/BtnLikeSpacer.tsx","webpack://ESMira/./src/frontend/ts/pages/qEdit.tsx","webpack://ESMira/./src/frontend/ts/widgets/BindObservable.tsx","webpack://ESMira/./src/frontend/ts/widgets/BtnWidgets.tsx","webpack://ESMira/./src/frontend/ts/widgets/DragContainer.tsx","webpack://ESMira/./src/frontend/ts/widgets/ObservableLangChooser.tsx","webpack://ESMira/./src/frontend/ts/widgets/TabBar.tsx","webpack://ESMira/./src/frontend/ts/widgets/TitleRow.tsx","webpack://ESMira/./src/frontend/langCodes/ lazy ^\\.\\/.*\\.json$ namespace object","webpack://ESMira/./node_modules/w3c-keyname/index.js"],"sourcesContent":["import m, {Vnode} from \"mithril\"\n\nexport function BtnLikeSpacer(): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn iconLikeSpacer\">\n\t\t</div>\n\t)\n}","import {SectionContent} from \"../site/SectionContent\";\nimport m, {Vnode} from \"mithril\";\nimport {Lang} from \"../singletons/Lang\";\nimport upSvg from \"../../imgs/icons/moveUp.svg?raw\"\nimport copySvg from \"../../imgs/icons/copy.svg?raw\"\nimport downSvg from \"../../imgs/icons/moveDown.svg?raw\"\nimport dataTableSvg from \"../../imgs/icons/table.svg?raw\"\nimport deleteSvg from \"../../imgs/icons/trash.svg?raw\"\nimport warnSvg from \"../../imgs/icons/warn.svg?raw\"\nimport {TabBar} from \"../widgets/TabBar\";\nimport {ObservablePrimitive} from \"../observable/ObservablePrimitive\";\nimport {Section} from \"../site/Section\";\nimport {Study} from \"../data/study/Study\";\nimport {Questionnaire} from \"../data/study/Questionnaire\";\nimport {ObservableLangChooser} from \"../widgets/ObservableLangChooser\";\nimport {BindObservable} from \"../widgets/BindObservable\";\nimport {TitleRow} from \"../widgets/TitleRow\";\nimport {Page} from \"../data/study/Page\";\nimport {safeConfirm} from \"../constants/methods\";\nimport {Input} from \"../data/study/Input\";\nimport {createUniqueName} from \"../helpers/UniqueName\";\nimport {DragContainer, DragTools} from \"../widgets/DragContainer\";\nimport {DashRow} from \"../widgets/DashRow\";\nimport {DashElement} from \"../widgets/DashElement\";\nimport {ObservableArray} from \"../observable/ObservableArray\";\nimport {ObservableStructureDataType} from \"../observable/ObservableStructure\";\nimport {BtnLikeSpacer} from \"../widgets/BtnLikeSpacer\";\nimport {DropdownMenu} from \"../widgets/DropdownMenu\";\nimport {AddDropdownMenus} from \"../helpers/AddDropdownMenus\";\nimport {BtnAdd, BtnCopy, BtnCustom, BtnEdit, BtnTransfer, BtnTrash} from \"../widgets/BtnWidgets\";\nimport { CodeEditor } from \"../widgets/CodeEditor\";\nimport { NotCompatibleIcon } from \"../widgets/NotCompatibleIcon\";\n\nexport class Content extends SectionContent {\n\tprivate readonly questionnaireIndex: ObservablePrimitive<number>\n\tprivate readonly addDropdownMenus = new AddDropdownMenus(this)\n\t\n\tpublic static preLoad(section: Section): Promise<any>[] {\n\t\treturn [section.getStudyPromise()]\n\t}\n\t\n\tconstructor(section: Section) {\n\t\tsuper(section)\n\t\tthis.questionnaireIndex = section.siteData.dynamicValues.getOrCreateObs(\"questionnaireIndex\", 0)\n\t}\n\t\n\tpublic title(): string {\n\t\treturn Lang.get(\"questionnaires\")\n\t}\n\tpublic titleExtra(): Vnode<any, any> | null {\n\t\tif(this.getStudyOrThrow().questionnaires.get().length == 0)\n\t\t\treturn null\n\t\treturn <a href={this.getUrl(\"demo\")}>\n\t\t\t{BtnCustom(m.trust(dataTableSvg), undefined, Lang.get(\"preview\"))}\n\t\t</a>\n\t}\n\t\n\t\n\tprivate addQuestionnaire(e: MouseEvent): Promise<void> {\n\t\tconst study = this.getStudyOrThrow()\n\t\treturn this.addDropdownMenus.addQuestionnaire(study, e.target as Element)\n\t}\n\tprivate copyQuestionnaire(study: Study, questionnaire: Questionnaire, index: number): void {\n\t\tconst newQuestionnaire = study.questionnaires.addCopy(questionnaire, index)\n\t\tthis.section.siteData.studyLoader.autoValidateQuestionnaire(study, newQuestionnaire)\n\t}\n\tprivate deleteQuestionnaire(study: Study, questionnaire: Questionnaire, index: number): void {\n\t\tif(!safeConfirm(Lang.get(\"confirm_delete_questionnaire\", questionnaire.getTitle())))\n\t\t\treturn\n\t\t\n\t\tlet internalId = questionnaire.internalId.get();\n\t\t\n\t\tstudy.questionnaires.remove(index)\n\t\t\n\t\tconst questionnairesArray = study.questionnaires.get()\n\t\t//remove specificGroupInternalId in eventTriggers:\n\t\tfor(let qI=questionnairesArray.length-1; qI>=0; --qI) {\n\t\t\tlet triggers = questionnairesArray[qI].actionTriggers.get();\n\t\t\tfor(let triggerI=triggers.length-1; triggerI>=0; --triggerI) {\n\t\t\t\tlet eventTriggers = triggers[triggerI].eventTriggers.get();\n\t\t\t\tfor(let cueI=eventTriggers.length-1; cueI>=0; --cueI) {\n\t\t\t\t\tlet cue = eventTriggers[cueI];\n\t\t\t\t\tif(cue.specificQuestionnaireInternalId.get() === internalId) {\n\t\t\t\t\t\tcue.specificQuestionnaireEnabled.set(false);\n\t\t\t\t\t\tcue.specificQuestionnaireInternalId.set(-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tprivate addPage(questionnaire: Questionnaire): void {\n\t\tquestionnaire.pages.push({})\n\t}\n\tprivate copyPage(page: Page, index: number): void {\n\t\tconst study = this.getStudyOrThrow()\n\t\tconst newPage = (page.parent as ObservableArray<ObservableStructureDataType, Page>).addCopy(page, index)\n\t\t\n\t\tthis.section.siteData.studyLoader.autoValidatePage(study, newPage)\n\t}\n\tprivate transferPage(oldQuestionnaire: Questionnaire, oldPageIndex: number, newQuestionnaire: Questionnaire, close: () => void): void {\n\t\tnewQuestionnaire.pages.moveFromOtherList(oldQuestionnaire.pages, oldPageIndex, newQuestionnaire.pages.get().length)\n\t\tclose()\n\t}\n\tprivate deletePage(questionnaire: Questionnaire, index: number): void {\n\t\tif(!safeConfirm(Lang.get(\"confirm_delete_inputPage\")))\n\t\t\treturn\n\t\t\n\t\tquestionnaire.pages.remove(index)\n\t\twindow.location.hash = `${this.section.getHash(this.section.depth)}`\n\t}\n\tprivate movePage(questionnaire: Questionnaire, pIndex: number, direction: number): void {\n\t\tconst pagesObs = questionnaire.pages;\n\t\tconst pages = pagesObs.get()\n\t\tconst temp = pages[pIndex]\n\t\tpages[pIndex] = pages[pIndex + direction]\n\t\tpages[pIndex + direction] = temp\n\t\tpagesObs.hasMutated()\n\t\t\n\t\twindow.setTimeout(function() { //wait until changes took effect\n\t\t\tconst parentBox = document.getElementById(\"questionnaireEditBox\")\n\t\t\tparentBox?.children[pIndex + direction].scrollIntoView({behavior: \"smooth\", block: \"start\"});\n\t\t}, 100);\n\t}\n\tprivate movePageUp(questionnaire: Questionnaire, pIndex: number): void {\n\t\tthis.movePage(questionnaire, pIndex, -1)\n\t}\n\tprivate movePageDown(questionnaire: Questionnaire, pIndex: number): void {\n\t\tthis.movePage(questionnaire, pIndex, +1)\n\t}\n\t\n\tprivate hasPages(questionnaire: Questionnaire): boolean {\n\t\treturn questionnaire.pages.get().length > 0\n\t}\n\n\tprivate hasInputs(questionnaire: Questionnaire): boolean {\n\t\treturn questionnaire.pages.get().some(value => value.inputs.get().length > 0)\n\t}\n\t\n\tprivate addInput(questionnaire: Questionnaire, pageI: number): void {\n\t\tconst name = createUniqueName(this.getStudyOrThrow())\n\t\tif(!name)\n\t\t\treturn\n\t\t\n\t\tquestionnaire.pages.get()[pageI].inputs.push({name: name})\n\t\tthis.newSection(`inputEdit,input:${btoa(name)}`)\n\t}\n\tprivate copyInput(input: Input, index: number): void {\n\t\tconst newName = createUniqueName(this.getStudyOrThrow(), input.name.get())\n\t\tif(!newName)\n\t\t\treturn\n\t\tconst newInput = (input.parent as ObservableArray<ObservableStructureDataType, Input>).addCopy(input, index)\n\t\tnewInput.name.set(newName)\n\t}\n\tprivate deleteInput(page: Page, index: number): void {\n\t\tif(!safeConfirm(Lang.get(\"confirm_delete_input\")))\n\t\t\treturn\n\t\t\n\t\tpage.inputs.remove(index)\n\t\twindow.location.hash = `${this.section.getHash(this.section.depth)}`\n\t}\n\t\n\t\n\tpublic getView(): Vnode<any, any> {\n\t\tconst study = this.getStudyOrThrow()\n\t\tif(study.questionnaires.get().length == 0)\n\t\t\treturn <div class=\"center spacingTop\">{BtnAdd(this.addQuestionnaire.bind(this), Lang.get(\"create\"))}</div>\n\t\t\n\t\treturn  TabBar(this.questionnaireIndex, study.questionnaires.get().map((questionnaire, index) => {\n\t\t\treturn {\n\t\t\t\ttitle: <div>{this.hasInputs(questionnaire) ? <div>{questionnaire.getTitle()}</div> : <div><div class=\"inlineIcon\">{m.trust(warnSvg)}</div>{questionnaire.getTitle()}</div>}</div>,\n\t\t\t\tdraggableList: study.questionnaires,\n\t\t\t\tview: () => this.getQuestionnaireView(study, questionnaire, index)\n\t\t\t}\n\t\t}), false, this.addQuestionnaire.bind(this))\n\t}\n\t\n\tprivate getQuestionnaireView(study: Study, questionnaire: Questionnaire, qIndex: number): Vnode<any, any> {\n\t\treturn <div>\n\t\t\t{DashRow(\n\t\t\t\tDashElement(\"stretched\",\n\t\t\t\t\t{floating: true, template: {title: Lang.get(\"copy\"), icon: m.trust(copySvg) }, onclick: this.copyQuestionnaire.bind(this, study, questionnaire, qIndex+1)},\n\t\t\t\t\t{floatingRight: true, highlight: true, template: {title: Lang.get(\"delete\"), icon: m.trust(deleteSvg) }, onclick: this.deleteQuestionnaire.bind(this, study, questionnaire, qIndex)},\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t<div class=\"listParent verticalPadding floatingSpaceLeft floatingSpaceRight\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label class=\"line\">\n\t\t\t\t\t\t\t\t\t\t<small>{Lang.get(\"questionnaire_name\")}</small>\n\t\t\t\t\t\t\t\t\t\t<input class=\"big\" type=\"text\" {...BindObservable(questionnaire.title)}/>\n\t\t\t\t\t\t\t\t\t\t{ObservableLangChooser(study)}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"listChild\">\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" {...BindObservable(questionnaire.isBackEnabled)}/>\n\t\t\t\t\t\t\t\t\t\t<span>{Lang.get(\"allow_back_button\")}</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" {...BindObservable(questionnaire.showInDisabledList)}/>\n\t\t\t\t\t\t\t\t\t\t<span>{Lang.get(\"show_in_disabled_list\")}</span>\n\t\t\t\t\t\t\t\t\t\t<small>{Lang.get(\"show_in_disabled_list_desc\")}</small>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t{!this.hasInputs(questionnaire) ?\n\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"inlineIcon\">{m.trust(warnSvg)}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span>{Lang.get(\"questionnaire_no_inputs\")}</span>\n\t\t\t\t\t\t\t\t\t\t</label> : <div></div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}),\n\t\t\t\tDashElement(\"stretched\", {\n\t\t\t\t\tcontent:\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"fakeLabel line\">\n\t\t\t\t\t\t\t\t<small>{Lang.get(\"questionnaire_end_script\")}{NotCompatibleIcon(\"Web\")}</small>\n\t\t\t\t\t\t\t\t{CodeEditor(questionnaire.endScriptBlock)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t})\n\t\t\t)}\n\t\t\t\n\t\t\t{\n\t\t\t\tDragContainer((dragTools) => {\n\t\t\t\t\treturn <div id=\"questionnaireEditBox\">\n\t\t\t\t\t\t{questionnaire.pages.get().map((page, pageIndex) => this.getPageView(dragTools, study, questionnaire, qIndex, page, pageIndex))}\n\t\t\t\t\t</div>\n\t\t\t\t})\n\t\t\t}\n\t\t\t<hr/>\n\t\t\t<div class=\"dragHidden spacingBottom center\">\n\t\t\t\t{BtnAdd(this.addPage.bind(this, questionnaire), Lang.get(\"add_page\"))}\n\t\t\t</div>\n\t\t</div>\n\t}\n\t\n\tprivate getPageView(dragTools: DragTools, study: Study, questionnaire: Questionnaire, qIndex: number, page: Page, pageIndex: number): Vnode<any, any> {\n\t\treturn <div class=\"spacingTop\">\n\t\t\t{TitleRow(\n\t\t\t\t<div class=\"spacingTop\">\n\t\t\t\t\t<div class=\"title flexGrow flexCenter\">{Lang.get(\"questionnaire_edit_title\", (pageIndex+1), page.inputs.get().length)}</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"nowrap flexCenter\">\n\t\t\t\t\t\t{BtnTrash(this.deletePage.bind(this, questionnaire, pageIndex))}\n\t\t\t\t\t\t{BtnCopy(this.copyPage.bind(this, page, pageIndex+1))}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDropdownMenu(\"transferPage\",\n\t\t\t\t\t\t\t\tBtnTransfer(),\n\t\t\t\t\t\t\t\t(close) => <ul>\n\t\t\t\t\t\t\t\t\t<h2 class=\"nowrap\">{Lang.getWithColon(\"transfer_to_other_questionnaire\")}</h2>\n\t\t\t\t\t\t\t\t\t{study.questionnaires.get().map((selectedQuestionnaire) =>\n\t\t\t\t\t\t\t\t\t\t<li class=\"clickable nowrap\" onclick={this.transferPage.bind(this, questionnaire, pageIndex, selectedQuestionnaire, close)}>{selectedQuestionnaire.getTitle()}</li>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t{pageIndex < questionnaire.pages.get().length - 1 ?\n\t\t\t\t\t\t\t<div class=\"btn horizontal clickable\" onclick={this.movePageDown.bind(this, questionnaire, pageIndex)}>\n\t\t\t\t\t\t\t\t{m.trust(downSvg)}\n\t\t\t\t\t\t\t</div> : BtnLikeSpacer()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ pageIndex > 0 ?\n\t\t\t\t\t\t\t<div class=\"btn horizontal clickable\" onclick={this.movePageUp.bind(this, questionnaire, pageIndex)}>\n\t\t\t\t\t\t\t\t{m.trust(upSvg)}\n\t\t\t\t\t\t\t</div> : BtnLikeSpacer()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<a class=\"spacingLeft\" href={this.getUrl(`pageSettings,qId:${questionnaire.internalId.get()},pageI:${pageIndex}`)}>\n\t\t\t\t\t\t\t{BtnEdit()}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t\n\t\t\t{page.inputs.get().length == 0 && dragTools.getDragTarget(0, page.inputs)}\n\t\t\t\n\t\t\t\n\t\t\t<div class=\"coloredLines spacingTop\">\n\t\t\t\t{page.inputs.get().map((input, inputIndex) => {\n\t\t\t\t\treturn dragTools.getDragTarget(inputIndex, page.inputs,\n\t\t\t\t\t\t<div class=\"line horizontalPadding verticalPadding flexHorizontal\">\n\t\t\t\t\t\t\t<div className=\"flexCenter spacingRight\">\n\t\t\t\t\t\t\t\t{dragTools.getDragStarter(inputIndex, page.inputs)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"flexGrow\">\n\t\t\t\t\t\t\t\t<div class=\"verticalPadding highlight smallText\">{`${Lang.getDynamic(\"input_\" + input.responseType.get())} ${input.required.get() ? '*' : ''} (${input.name.get()})`}</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"verticalPadding\">{m.trust(input.text.get())}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"nowrap flexCenter\">\n\t\t\t\t\t\t\t\t{BtnTrash(this.deleteInput.bind(this, page, inputIndex))}\n\t\t\t\t\t\t\t\t{BtnCopy(this.copyInput.bind(this, input, inputIndex+1))}\n\t\t\t\t\t\t\t\t<a class=\"spacingLeft\" href={this.getUrl(`inputEdit,input:${btoa(input.name.get())}`)}>\n\t\t\t\t\t\t\t\t\t{BtnEdit()}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div class=\"dragHidden verticalPadding spacingLeft\">\n\t\t\t\t{BtnLikeSpacer()}\n\t\t\t\t{BtnAdd(this.addInput.bind(this, questionnaire, pageIndex), Lang.get(\"add_item\"))}\n\t\t\t</div>\n\t\t</div>\n\t}\n}","import m from \"mithril\"\nimport {PrimitiveType} from \"../observable/types/PrimitiveType\";\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {getMidnightMillis, timeStampToTimeString} from \"../constants/methods\";\n\nexport interface Transformer {\n\ttoAttribute(value: PrimitiveType): PrimitiveType\n\ttoObs(value: string, obs: BaseObservable<PrimitiveType>): PrimitiveType\n}\nconst OptimusPrimeTransformer: Transformer = {\n\ttoAttribute(value: PrimitiveType): PrimitiveType {\n\t\treturn value\n\t},\n\ttoObs(value: string): PrimitiveType {\n\t\treturn value\n\t}\n}\nconst OptimusPrimeNumberTransformer: Transformer = {\n\ttoAttribute(value: PrimitiveType): PrimitiveType {\n\t\treturn value\n\t},\n\ttoObs(value: string): PrimitiveType {\n\t\treturn parseInt(value) || 0\n\t}\n}\n\nexport class OnBeforeChangeTransformer<T extends PrimitiveType> implements Transformer {\n\tprivate readonly onBeforeChange: (before: T, after: T) => T\n\tconstructor(onBeforeChange: (before: T, after: T) => T) {\n\t\tthis.onBeforeChange = onBeforeChange\n\t}\n\tpublic toAttribute(value: T): T {\n\t\treturn value\n\t}\n\tpublic toObs(value: string, obs: BaseObservable<T>): T {\n\t\treturn this.onBeforeChange(obs.get(), value as T) || value as T\n\t}\n}\nexport const BooleanTransformer: Transformer = {\n\ttoAttribute(value: PrimitiveType): PrimitiveType {\n\t\treturn value ? \"1\" : \"0\"\n\t},\n\ttoObs(value: string): PrimitiveType {\n\t\treturn value == \"1\"\n\t}\n}\nexport const DateTransformer: Transformer = {\n\ttoAttribute(value: PrimitiveType): string {\n\t\tconst intValue = typeof value == \"number\" ? value : (parseInt(value.toString()) || 0)\n\t\tif(intValue == 0)\n\t\t\treturn \"\"\n\t\treturn (new Date(intValue)).toISOString().split(\"T\")[0]\n\t},\n\ttoObs(value: string): PrimitiveType {\n\t\tif(value === \"\")\n\t\t\treturn 0\n\t\telse\n\t\t\treturn (new Date(value)).getTime()\n\t}\n}\nexport const TimeTransformer: Transformer = {\n\ttoAttribute(value: PrimitiveType): string {\n\t\tconst intValue = typeof value == \"number\" ? value : (parseInt(value.toString()) || 0)\n\t\tif(intValue == -1)\n\t\t\treturn \"\"\n\t\telse {\n\t\t\tconst midnight = getMidnightMillis()\n\t\t\t\n\t\t\treturn timeStampToTimeString(midnight + intValue)\n\t\t}\n\t},\n\ttoObs(value: string): PrimitiveType {\n\t\tif(value == \"\")\n\t\t\treturn -1\n\t\telse {\n\t\t\tconst parts = value.split(\":\")\n\t\t\tconst midnight = getMidnightMillis()\n\t\t\t\n\t\t\tconst date = new Date()\n\t\t\tdate.setHours(parseInt(parts[0]) || 0)\n\t\t\tdate.setMinutes(parseInt(parts[1]) || 0)\n\t\t\t\n\t\t\treturn date.getTime() - midnight\n\t\t}\n\t}\n}\n\nexport function BindObservable(obs: BaseObservable<PrimitiveType>, transformer?: Transformer, attr?: keyof HTMLInputElement, event: keyof HTMLInputElement = \"onchange\"): Record<string, any> {\n\tconst attrValue = obs.get()\n\tif(!transformer) {\n\t\tif(typeof attrValue == \"number\")\n\t\t\ttransformer = OptimusPrimeNumberTransformer\n\t\telse\n\t\t\ttransformer = OptimusPrimeTransformer\n\t}\n\tif(!attr) {\n\t\tif(typeof attrValue == \"boolean\")\n\t\t\tattr = \"checked\"\n\t\telse\n\t\t\tattr = \"value\"\n\t}\n\t\n\treturn {\n\t\t[attr]: transformer.toAttribute(attrValue),\n\t\t[event]: (e: InputEvent) => {\n\t\t\tconst element = e.target as HTMLInputElement\n\t\t\tobs.set(transformer!.toObs(element[attr!] as string, obs))\n\t\t}\n\t}\n}","import m, {Vnode} from \"mithril\"\nimport {Lang} from \"../singletons/Lang\";\nimport addSvg from \"../../imgs/icons/addCircle.svg?raw\";\nimport changeSvg from \"../../imgs/icons/change.svg?raw\";\nimport copySvg from \"../../imgs/icons/copy.svg?raw\";\nimport editSvg from \"../../imgs/icons/edit.svg?raw\";\nimport okSvg from \"../../imgs/icons/ok.svg?raw\";\nimport reloadSvg from \"../../imgs/icons/reload.svg?raw\";\nimport removeSvg from \"../../imgs/icons/remove.svg?raw\";\nimport transferSvg from \"../../imgs/icons/transfer.svg?raw\";\nimport trashSvg from \"../../imgs/icons/trash.svg?raw\";\n\nexport function BtnCustom(\n\ticon: Vnode<any, any>,\n\tonclick?: (e: MouseEvent) => void,\n\ttitle: string = \"\",\n\thoverTitle: string = \"\"\n): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn clickable\" onclick={onclick} title={title || hoverTitle}>\n\t\t\t{icon}\n\t\t\t<span class=\"middle smallText\">{title}</span>\n\t\t</div>\n\t)\n}\nexport function BtnRemove(onclick: () => void, title: string = \"\",): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn btnDelete clickable\" onclick={onclick} title={title || Lang.get(\"delete\")}>\n\t\t\t{m.trust(removeSvg)}\n\t\t\t<span class=\"smallText highlight middle\">{title}</span>\n\t\t</div>\n\t)\n}\nexport function BtnTrash(onclick: () => void, title: string = \"\",): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn btnDelete clickable\" onclick={onclick} title={title || Lang.get(\"delete\")}>\n\t\t\t{m.trust(trashSvg)}\n\t\t\t<span class=\"highlight middle\">{title}</span>\n\t\t</div>\n\t)\n}\n\n\nexport function BtnAdd(onclick?: (e: MouseEvent) => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(addSvg), onclick, title, Lang.get(\"add\"))\n}\n\nexport function BtnCopy(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(copySvg), onclick, title, Lang.get(\"copy\"))\n}\n\nexport function BtnEdit(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(editSvg), onclick, title, Lang.get(\"change\"))\n}\n\nexport function BtnChange(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(changeSvg), onclick, title, Lang.get(\"change\"))\n}\n\nexport function BtnOk(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(okSvg), onclick, title, Lang.get(\"save\"))\n}\n\nexport function BtnReload(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(reloadSvg), onclick, title, Lang.get(\"reload\"))\n}\n\nexport function BtnTransfer(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(transferSvg), onclick, title, Lang.get(\"transfer\"))\n\t\n}\n","import m, {Component, Vnode, VnodeDOM} from \"mithril\"\nimport addSvg from \"../../imgs/icons/dragHandle.svg?raw\"\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {ArrayInterface} from \"../observable/interfaces/ArrayInterface\";\n\nexport interface DragTools {\n\tgetDragTarget(index: number, targetList: ArrayType, content?: Vnode<any, any>): Vnode<any, any>\n\tgetDragStarter(index: number, dragTarget: ArrayType): Vnode<any, any>\n}\n\ntype ArrayType = ArrayInterface<any, BaseObservable<any>>\n\ninterface DragContainerImpOptions {\n\tcontent: (container: DragTools) => Vnode<any, any>\n}\nclass DragContainerImp implements DragTools, Component<DragContainerImpOptions, any> {\n\tprivate contentVNode?: VnodeDOM<any, any>\n\tprivate currentStartList?: ArrayType\n\tprivate currentTargetList?: ArrayType\n\tprivate currentStartIndex: number = 0\n\tprivate currentTargetIndex: number = 0\n\tprivate currentDragClone?: HTMLElement\n\tprivate currentStartElement?: HTMLElement\n\tprivate startIndex: number = 0\n\t\n\tpublic getDragTarget(index: number, targetList: ArrayType, content: Vnode<any, any> = <div></div>): Vnode<any, any> {\n\t\tcontent.attrs[\"className\"] = `dragTarget ${content.attrs[\"className\"] ?? \"\"}`\n\t\tcontent.attrs[\"ondragend\"] = this.ondragend.bind(this)\n\t\tcontent.attrs[\"ondragenter\"] = this.ondragenter.bind(this, index, targetList)\n\t\treturn content\n\t}\n\t\n\tpublic getDragStarter(index: number, targetList: ArrayType): Vnode<any, any> {\n\t\treturn <div class=\"btn clickable dragStarter\" draggable=\"true\" ondragstart={this.ondragstart.bind(this, index, targetList)}>\n\t\t\t{m.trust(addSvg)}\n\t\t</div>\n\t}\n\t\n\t\n\tprivate getIndexInContainer(searchEl: HTMLElement): number {\n\t\tconst htmlCollection = this.contentVNode?.dom.getElementsByClassName(\"dragTarget\")\n\t\tif(htmlCollection) {\n\t\t\tfor(let i = htmlCollection.length - 1; i >= 0; --i) {\n\t\t\t\tif(htmlCollection[i] === searchEl)\n\t\t\t\t\treturn i\n\t\t\t}\n\t\t}\n\t\treturn -1\n\t}\n\t\n\tprivate addDragSpacer(locationEl: HTMLElement): void {\n\t\tlet insertBefore: Element | null = locationEl //when insertBefore is null, currentDragClone will be placed at the end\n\t\tif(!this.currentDragClone)\n\t\t\treturn\n\t\tif(this.currentDragClone.parentNode) {\n\t\t\tconst locationIndex = this.getIndexInContainer(locationEl)\n\t\t\tconst spacerIndex = this.getIndexInContainer(this.currentDragClone)\n\t\t\t\n\t\t\tif(spacerIndex < this.startIndex) { //mouse moved up (/right) from starting point\n\t\t\t\tif(spacerIndex < locationIndex) { //mouse is moving down (/left) again\n\t\t\t\t\tinsertBefore = locationEl.nextElementSibling\n\t\t\t\t\t++this.currentTargetIndex\n\t\t\t\t}\n\t\t\t}\n\t\t\telse { //mouse moved down (/left) from starting point\n\t\t\t\t\n\t\t\t\t//we need to add one to targetIndex.\n\t\t\t\t// But when we are in the same list, removing the item (before moving it) means that targetIndex points to the element afterwards anyway.\n\t\t\t\t// But when we are in another list, we need to correct manually:\n\t\t\t\tif(this.currentStartList != this.currentTargetList)\n\t\t\t\t\t++this.currentTargetIndex\n\t\t\t\t\n\t\t\t\tif(spacerIndex > locationIndex) //mouse is moving up (/right) again\n\t\t\t\t\t--this.currentTargetIndex\n\t\t\t\telse\n\t\t\t\t\tinsertBefore = locationEl.nextElementSibling\n\t\t\t}\n\t\t\tthis.currentDragClone.parentNode.removeChild(this.currentDragClone)\n\t\t}\n\t\tlocationEl.parentNode?.insertBefore(this.currentDragClone, insertBefore)\n\t}\n\t\n\tprivate ondragstart(index: number, targetList: ArrayType, e: DragEvent): boolean {\n\t\tlet targetElement = e.currentTarget as HTMLElement\n\t\twhile(targetElement && !targetElement.classList.contains(\"dragTarget\")) {\n\t\t\ttargetElement = targetElement.parentNode as HTMLElement\n\t\t}\n\t\tconst dragRoot = this.contentVNode?.dom\n\t\tif(!dragRoot)\n\t\t\treturn false\n\t\t\n\t\t\n\t\tthis.startIndex = this.getIndexInContainer(targetElement)\n\t\t\n\t\tthis.currentStartList = targetList\n\t\tthis.currentStartIndex = index\n\t\t\n\t\tthis.currentDragClone = targetElement.cloneNode(true) as HTMLElement\n\t\tthis.currentDragClone?.classList.add(\"drag_spacer\")\n\t\t\n\t\tthis.currentDragClone?.addEventListener(\"dragover\", this.ondragover.bind(this))\n\t\tthis.currentDragClone?.addEventListener(\"dragleave\", this.ondragleave.bind(this))\n\t\tthis.currentDragClone?.addEventListener(\"drop\", this.ondrop.bind(this))\n\t\t\n\t\ttargetElement.classList.add(\"dragStarted\")\n\t\te.dataTransfer?.setDragImage(targetElement, 0, 0)\n\t\t\n\t\t\n\t\tthis.currentStartElement = targetElement\n\t\t\n\t\twindow.setTimeout( () => {\n\t\t\t//in firefox: setDragImage() seems to stop working when the class of document.body is changed\n\t\t\t//in chrome: DOM changes seem to cancel dragging altogether\n\t\t\t//solution: doing this stuff in a different \"thread\" seems to do the trick\n\t\t\tthis.addDragSpacer(targetElement)\n\t\t\tdragRoot.classList.add(\"is_dragging\")\n\t\t}, 0)\n\t\treturn true\n\t}\n\tprivate ondragend(e: DragEvent): void {\n\t\tthis.ondragleave(e)\n\t\te.preventDefault()\n\t\t\n\t\tthis.contentVNode?.dom.classList.remove(\"is_dragging\")\n\t\tthis.currentStartElement?.classList.remove(\"dragStarted\")\n\t\tif(this.currentDragClone?.parentNode)\n\t\t\tthis.currentDragClone.parentNode.removeChild(this.currentDragClone)\n\t\t\n\t\tthis.currentDragClone = undefined\n\t}\n\tprivate ondragenter(index: number, targetList: ArrayType, e: DragEvent): false {\n\t\tconst targetElement = e.currentTarget as HTMLElement\n\t\tif(!this.contentVNode?.dom.contains(targetElement))\n\t\t\treturn false\n\t\t\n\t\tif(e.dataTransfer)\n\t\t\te.dataTransfer.dropEffect = \"none\"\n\t\te.preventDefault()\n\t\t\n\t\tthis.currentTargetList = targetList\n\t\tthis.currentTargetIndex = index\n\t\t\n\t\tthis.addDragSpacer(targetElement)\n\t\treturn false\n\t}\n\t\n\tprivate ondragover(e: DragEvent): void {\n\t\te.preventDefault()\n\t\tif(e.dataTransfer)\n\t\t\te.dataTransfer.dropEffect = \"move\"\n\t}\n\tprivate ondragleave(e: DragEvent): void {\n\t\te.preventDefault()\n\t}\n\tprivate ondrop(e: DragEvent): void {\n\t\te.preventDefault()\n\t\t\n\t\tif(this.currentStartList == null || this.currentTargetList == null)\n\t\t\treturn\n\t\t\n\t\tif(this.currentTargetList == this.currentStartList)\n\t\t\tthis.currentTargetList.move(this.currentStartIndex, this.currentTargetIndex)\n\t\telse\n\t\t\tthis.currentTargetList.moveFromOtherList(this.currentStartList, this.currentStartIndex, this.currentTargetIndex)\n\t\t\n\t\tthis.currentStartList = this.currentTargetList = undefined\n\t\tthis.ondragend(e)\n\t}\n\t\n\tpublic onupdate(vNode: VnodeDOM<DragContainerImpOptions, any>): void {\n\t\tthis.contentVNode = vNode\n\t}\n\t\n\tpublic view(vNode: Vnode<DragContainerImpOptions, any>): Vnode<any, any> {\n\t\treturn vNode.attrs.content(this)\n\t}\n}\n\n\nexport function DragContainer(\n\tcontent: (container: DragTools) => Vnode<any, any>\n): Vnode<any, any> {\n\treturn m(DragContainerImp, { content: content })\n}","import m, {Vnode} from \"mithril\"\nimport {Lang} from \"../singletons/Lang\";\nimport {TranslationRootInterface} from \"../observable/interfaces/TranslationRootInterface\";\n\n\nlet langNames: Record<string, string> | null = null\n\nexport function ObservableLangChooser(obs: TranslationRootInterface): Vnode<any, any> {\n\tif(obs.langCodes.get().length <= 1)\n\t\treturn <div></div>\n\telse if(langNames == null) {\n\t\timport(`../../langCodes/${Lang.code}.json`)\n\t\t\t.then((loadedLangNames) => {\n\t\t\t\tlangNames = loadedLangNames\n\t\t\t\tm.redraw()\n\t\t\t})\n\t\treturn <div></div>\n\t}\n\t\n\tconst changeLang = (langCode: string) => {\n\t\tobs.currentLangCode.set(langCode)\n\t\tm.redraw()\n\t}\n\t\n\treturn <div class=\"observableLangChooser\" title={Lang.get(\"language\")}>\n\t\t{\n\t\t\tobs.langCodes.get().map((langCode) =>\n\t\t\t\t<span\n\t\t\t\t\tclass={langCode.get() == obs.currentLangCode.get() ? \"element clickable selected\" : \"element clickable\"}\n\t\t\t\t\tonclick={() => changeLang(langCode.get())}\n\t\t\t\t>{langNames![langCode.get()] ?? langCode.get()}</span>\n\t\t\t)\n\t\t}\n\t</div>\n}","import m, {Vnode} from \"mithril\"\nimport {ObservablePrimitive} from \"../observable/ObservablePrimitive\";\nimport {DragContainer} from \"./DragContainer\";\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {ArrayInterface} from \"../observable/interfaces/ArrayInterface\";\n\nexport interface TabContent {\n\ttitle: string | Vnode<any, any>\n\tdraggableList?: ArrayInterface<any, BaseObservable<any>>\n\thighlight?: boolean\n\tview: () => Vnode<any, any>\n}\n\nexport function TabBar(selectedIndex: ObservablePrimitive<number>, tabs: (TabContent | undefined | false)[], smallBar: boolean = false, addBtnCallback?: (e: MouseEvent) => void): Vnode<any, any> {\n\tif(!tabs.length)\n\t\treturn (<div></div>)\n\t\n\tif(selectedIndex.get() >= tabs.length)\n\t\tselectedIndex.set(0)\n\treturn (\n\t\tDragContainer((dragTools) => {\n\t\t\tconst selectedTab = tabs[selectedIndex.get()]\n\t\t\treturn <div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class={smallBar ? \"tabBar smallBar\" : \"tabBar\"}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttabs.map((tab, index) => {\n\t\t\t\t\t\t\t\tif(!tab)\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\tconst className = `tab ${(selectedIndex.get() == index) ? \"selected\" : \"\"} ${tab.highlight ? \"highlight\" : \"\"}`\n\t\t\t\t\t\t\t\tconst content = <div class={className} onclick={() => {selectedIndex.set(index)}}>\n\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t{tab.draggableList && dragTools.getDragStarter(index, tab.draggableList)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class=\"middle\">{tab.title}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\treturn tab.draggableList\n\t\t\t\t\t\t\t\t\t? dragTools.getDragTarget(index, tab.draggableList, content)\n\t\t\t\t\t\t\t\t\t: content\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{addBtnCallback &&\n\t\t\t\t\t\t\t<div class=\"tab addBtn\" onclick={addBtnCallback}>\n\t\t\t\t\t\t\t\t<span class=\"middle\">+</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tabContent\">\n\t\t\t\t\t{selectedTab && selectedTab.view()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t})\n\t)\n}","import m, {Vnode} from \"mithril\"\nexport function TitleRow(\n\ttitle: string | Vnode<any, any>\n): Vnode<any, any> {\n\tif(typeof title == \"string\") {\n\t\treturn <div class=\"titleRow\">\n\t\t\t<span class=\"title\">{title}</span>\n\t\t</div>\n\t}\n\telse {\n\t\ttitle.attrs[\"className\"] = `titleRow ${title.attrs[\"className\"] ?? \"\"}`\n\t\treturn title\n\t}\n}","var map = {\n\t\"./de.json\": [\n\t\t5142,\n\t\t5142\n\t],\n\t\"./en.json\": [\n\t\t1294,\n\t\t1294\n\t],\n\t\"./it.json\": [\n\t\t7416,\n\t\t7416\n\t],\n\t\"./tl.json\": [\n\t\t601,\n\t\t601\n\t],\n\t\"./uk.json\": [\n\t\t6541,\n\t\t6541\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 6480;\nmodule.exports = webpackAsyncContext;","export var base = {\n  8: \"Backspace\",\n  9: \"Tab\",\n  10: \"Enter\",\n  12: \"NumLock\",\n  13: \"Enter\",\n  16: \"Shift\",\n  17: \"Control\",\n  18: \"Alt\",\n  20: \"CapsLock\",\n  27: \"Escape\",\n  32: \" \",\n  33: \"PageUp\",\n  34: \"PageDown\",\n  35: \"End\",\n  36: \"Home\",\n  37: \"ArrowLeft\",\n  38: \"ArrowUp\",\n  39: \"ArrowRight\",\n  40: \"ArrowDown\",\n  44: \"PrintScreen\",\n  45: \"Insert\",\n  46: \"Delete\",\n  59: \";\",\n  61: \"=\",\n  91: \"Meta\",\n  92: \"Meta\",\n  106: \"*\",\n  107: \"+\",\n  108: \",\",\n  109: \"-\",\n  110: \".\",\n  111: \"/\",\n  144: \"NumLock\",\n  145: \"ScrollLock\",\n  160: \"Shift\",\n  161: \"Shift\",\n  162: \"Control\",\n  163: \"Control\",\n  164: \"Alt\",\n  165: \"Alt\",\n  173: \"-\",\n  186: \";\",\n  187: \"=\",\n  188: \",\",\n  189: \"-\",\n  190: \".\",\n  191: \"/\",\n  192: \"`\",\n  219: \"[\",\n  220: \"\\\\\",\n  221: \"]\",\n  222: \"'\"\n}\n\nexport var shift = {\n  48: \")\",\n  49: \"!\",\n  50: \"@\",\n  51: \"#\",\n  52: \"$\",\n  53: \"%\",\n  54: \"^\",\n  55: \"&\",\n  56: \"*\",\n  57: \"(\",\n  59: \":\",\n  61: \"+\",\n  173: \"_\",\n  186: \":\",\n  187: \"+\",\n  188: \"<\",\n  189: \"_\",\n  190: \">\",\n  191: \"?\",\n  192: \"~\",\n  219: \"{\",\n  220: \"|\",\n  221: \"}\",\n  222: \"\\\"\"\n}\n\nvar mac = typeof navigator != \"undefined\" && /Mac/.test(navigator.platform)\nvar ie = typeof navigator != \"undefined\" && /MSIE \\d|Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent)\n\n// Fill in the digit keys\nfor (var i = 0; i < 10; i++) base[48 + i] = base[96 + i] = String(i)\n\n// The function keys\nfor (var i = 1; i <= 24; i++) base[i + 111] = \"F\" + i\n\n// And the alphabetic keys\nfor (var i = 65; i <= 90; i++) {\n  base[i] = String.fromCharCode(i + 32)\n  shift[i] = String.fromCharCode(i)\n}\n\n// For each code that doesn't have a shift-equivalent, copy the base name\nfor (var code in base) if (!shift.hasOwnProperty(code)) shift[code] = base[code]\n\nexport function keyName(event) {\n  // On macOS, keys held with Shift and Cmd don't reflect the effect of Shift in `.key`.\n  // On IE, shift effect is never included in `.key`.\n  var ignoreKey = mac && event.metaKey && event.shiftKey && !event.ctrlKey && !event.altKey ||\n      ie && event.shiftKey && event.key && event.key.length == 1 ||\n      event.key == \"Unidentified\"\n  var name = (!ignoreKey && event.key) ||\n    (event.shiftKey ? shift : base)[event.keyCode] ||\n    event.key || \"Unidentified\"\n  // Edge sometimes produces wrong names (Issue #3)\n  if (name == \"Esc\") name = \"Escape\"\n  if (name == \"Del\") name = \"Delete\"\n  // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/\n  if (name == \"Left\") name = \"ArrowLeft\"\n  if (name == \"Up\") name = \"ArrowUp\"\n  if (name == \"Right\") name = \"ArrowRight\"\n  if (name == \"Down\") name = \"ArrowDown\"\n  return name\n}\n"],"names":["BtnLikeSpacer","class","section","addDropdownMenus","AddDropdownMenus","questionnaireIndex","siteData","dynamicValues","getOrCreateObs","preLoad","getStudyPromise","title","Lang","get","titleExtra","this","getStudyOrThrow","questionnaires","length","href","getUrl","undefined","addQuestionnaire","e","study","target","copyQuestionnaire","questionnaire","index","newQuestionnaire","addCopy","studyLoader","autoValidateQuestionnaire","deleteQuestionnaire","getTitle","internalId","remove","questionnairesArray","qI","triggers","actionTriggers","triggerI","eventTriggers","cueI","cue","specificQuestionnaireInternalId","specificQuestionnaireEnabled","set","addPage","pages","push","copyPage","page","newPage","parent","autoValidatePage","transferPage","oldQuestionnaire","oldPageIndex","close","moveFromOtherList","deletePage","window","location","hash","getHash","depth","movePage","pIndex","direction","pagesObs","temp","hasMutated","setTimeout","parentBox","document","getElementById","children","scrollIntoView","behavior","block","movePageUp","movePageDown","hasPages","hasInputs","some","value","inputs","addInput","pageI","name","newSection","btoa","copyInput","input","newName","deleteInput","getView","bind","TabBar","map","draggableList","view","getQuestionnaireView","qIndex","DashRow","DashElement","floating","template","icon","onclick","floatingRight","highlight","content","type","BindObservable","ObservableLangChooser","isBackEnabled","showInDisabledList","NotCompatibleIcon","CodeEditor","endScriptBlock","DragContainer","dragTools","id","pageIndex","getPageView","TitleRow","DropdownMenu","getWithColon","selectedQuestionnaire","getDragTarget","inputIndex","className","getDragStarter","getDynamic","responseType","required","text","SectionContent","OptimusPrimeTransformer","toAttribute","toObs","OptimusPrimeNumberTransformer","parseInt","onBeforeChange","obs","BooleanTransformer","DateTransformer","intValue","toString","Date","toISOString","split","getTime","TimeTransformer","midnight","parts","date","setHours","setMinutes","transformer","attr","event","attrValue","element","BtnCustom","hoverTitle","BtnRemove","BtnTrash","BtnAdd","BtnCopy","BtnEdit","BtnOk","BtnReload","BtnTransfer","currentStartIndex","currentTargetIndex","startIndex","targetList","attrs","ondragend","ondragenter","draggable","ondragstart","getIndexInContainer","searchEl","htmlCollection","contentVNode","dom","getElementsByClassName","i","addDragSpacer","locationEl","insertBefore","currentDragClone","parentNode","locationIndex","spacerIndex","nextElementSibling","currentStartList","currentTargetList","removeChild","targetElement","currentTarget","classList","contains","dragRoot","cloneNode","add","addEventListener","ondragover","ondragleave","ondrop","dataTransfer","setDragImage","currentStartElement","preventDefault","dropEffect","move","onupdate","vNode","DragContainerImp","langNames","langCodes","code","then","loadedLangNames","langCode","currentLangCode","changeLang","selectedIndex","tabs","smallBar","addBtnCallback","selectedTab","tab","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","Error","ids","t","keys","Object","module","exports","base","shift","mac","navigator","test","platform","ie","exec","userAgent","String","fromCharCode","hasOwnProperty","keyName","metaKey","shiftKey","ctrlKey","altKey","key","keyCode"],"sourceRoot":""}