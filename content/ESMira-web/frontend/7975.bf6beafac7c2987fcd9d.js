"use strict";(self.webpackChunkESMira=self.webpackChunkESMira||[]).push([[6471,7975],{7975:(t,e,n)=>{n.r(e),n.d(e,{Content:()=>w});var i,o=n(7097),r=n(4862),s=n.n(r),a=n(9700),l=n(4277),c=n(8819),u=n(6969),h=n(6002),d=n(3379),p=n(6471),g=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))},f=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},w=function(t){function e(e,n,i){var o=t.call(this,e)||this;o.is_generating_zip=!1;for(var r=n.questionnaires.get(),s={},a=r.length-1;a>=0;--a){var l=r[a];s[l.internalId.get()]=l}return o.backupEntries=i.filter((function(t){return!s.hasOwnProperty(parseInt(t))})).map((function(t){var e,n=null!==(e=t.match(/^(\d{4}-\d{2}-\d{2})_(\d+)$/))&&void 0!==e?e:[],i=n[0],o=n[1],r=n[2];return null!=i&&s.hasOwnProperty(parseInt(r))?{title:"".concat(o," ").concat(s[parseInt(r)].getTitle()),fileName:t}:{title:t,fileName:t}})),o}return g(e,t),e.preLoad=function(t){var e;return[t.getStudyPromise(),h.l.loadJson("".concat(c.Zv,"?type=ListData&study_id=").concat(null!==(e=t.getStaticInt("id"))&&void 0!==e?e:0)),t.getAdmin().init()]},e.prototype.title=function(){return a.J.get("data_table")},e.prototype.backupStudy=function(t){return v(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return confirm(a.J.get("confirm_backup",t.title.get()))?[4,this.section.loader.loadJson("".concat(c.Zv,"?type=BackupStudy"),"post","study_id=".concat(t.id.get()))]:[2];case 1:return e.sent(),[4,this.section.reload()];case 2:return e.sent(),this.section.loader.info(a.J.get("info_successful")),[2]}}))}))},e.prototype.emptyData=function(t){return v(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return(0,d.gB)(a.J.get("confirm_delete_data",t.title.get()))?[4,this.section.loader.loadJson("".concat(c.Zv,"?type=EmptyData"),"post","study_id=".concat(t.id.get()))]:[2];case 1:return e.sent(),[4,this.section.reload()];case 2:return e.sent(),this.section.loader.info(a.J.get("info_successful")),[2]}}))}))},e.prototype.getView=function(){var t=this.getStudyOrThrow();return 0==t.version.get()?s()("div",null):s()("div",null,this.getDataLineView("general",t,[{title:a.J.get("events_csv_title"),fileName:"events"},{title:a.J.get("web_access_csv_title"),fileName:"web_access"}]),(0,u.d)(a.J.getWithColon("questionnaires")),this.getDataLineView("questionnaire",t,t.questionnaires.get().map((function(t){return{title:t.getTitle(),fileName:t.internalId.get(),previewId:t.internalId.get()}}))),t.hasMedia()&&s()("div",null,(0,u.d)(a.J.getWithColon("media_download")),s()("a",{class:"spacingRight",onclick:this.waitForDownload.bind(this,t)},s().trust(l),s()("span",{id:"mediaZipSpan",class:"spacingLeft"},"media.zip"))),(0,u.d)(a.J.getWithColon("backups")),s()("div",{class:"verticalPadding"},s()("a",{class:"horizontal spacingRight",onclick:this.backupStudy.bind(this,t)},s().trust('<svg class="middle" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"/></svg>'),s()("span",null,a.J.get("create_backup")))),s()("br",null),this.getDataLineView("backup",t,this.backupEntries),s()("br",null),this.hasPermission("write",t.id.get())&&s()("div",{class:"verticalPadding highlight"},(0,p.Pq)(this.emptyData.bind(this,t),a.J.get("empty_data"))))},e.prototype.getDataLineView=function(t,e,n){var i=this;return n.map((function(n){return s()("div",null,s()("div",null,s()("a",{class:"spacingRight",href:c.WW.replace("%1",e.id.get().toString()).replace("%2",n.fileName.toString()),download:n.title,title:a.J.get("download")},s().trust(l)),n.previewId&&s()("span",null,s()("a",{class:"spacingRight",href:i.getUrl("demo:static,qId:".concat(n.previewId))},s().trust('<svg class="middle" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>'))),s()("a",{href:i.getUrl("dataView:".concat(t,",").concat("number"==typeof n.fileName?"qId":"file",":").concat(n.fileName))},n.title)))}))},e.prototype.waitForDownload=function(t){var e=this;if(!this.is_generating_zip){this.is_generating_zip=!0;var n=new EventSource("".concat(c.pt.replace("%1",t.id.get().toString()))),i=document.getElementById("mediaZipSpan");n.addEventListener("progress",(function(t){null!=i&&(i.innerText="media.zip (%1 ... %2%)".replace("%1",a.J.get("generating")).replace("%2",t.data))})),n.addEventListener("finished",(function(o){e.is_generating_zip=!1,n.close(),null!=i&&(i.innerText="media.zip");var r=document.createElement("a");r.setAttribute("href","".concat(c.Q1.replace("%1",t.id.get().toString()))),r.setAttribute("download","media.zip"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}))}},e}(o.R)},7097:(t,e,n)=>{n.d(e,{R:()=>i});var i=function(){function t(t){this.section=t}return t.preLoad=function(t){return[]},t.prototype.preInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.resolve()},t.prototype.hasAlternatives=function(){return!1},t.prototype.getAlternatives=function(){return null},t.prototype.titleExtra=function(){return null},t.prototype.getDynamic=function(t,e){return this.section.getDynamic(t,e)},t.prototype.setDynamic=function(t,e){this.section.siteData.dynamicValues.setChild(t,e)},t.prototype.getStaticInt=function(t){return this.section.getStaticInt(t)},t.prototype.getStaticString=function(t){return this.section.getStaticString(t)},t.prototype.getStudyOrNull=function(t){var e,n;void 0===t&&(t=null!==(e=this.getStaticInt("id"))&&void 0!==e?e:-1);var i=this.section.siteData.studyLoader.getStudies();return-1==t?1==i.getCount()&&i.getFirst()||null:null!==(n=i.getEntry(t))&&void 0!==n?n:null},t.prototype.getStudyOrThrow=function(t){var e;void 0===t&&(t=null!==(e=this.getStaticInt("id"))&&void 0!==e?e:-1);var n=this.getStudyOrNull(t);if(!n)throw new Error("Study ".concat(t," does not exist!"));return n},t.prototype.getQuestionnaireOrNull=function(t,e){var n;if(void 0===t&&(t=null!==(n=this.getStaticInt("qId"))&&void 0!==n?n:-1),void 0===e&&(e=this.getStudyOrNull()),!e)return null;for(var i=0,o=this.getStudyOrThrow().questionnaires.get();i<o.length;i++){var r=o[i];if(r.internalId.get()==t)return r}return null},t.prototype.getQuestionnaireOrThrow=function(t){var e;void 0===t&&(t=null!==(e=this.getStaticInt("qId"))&&void 0!==e?e:-1);var n=this.getQuestionnaireOrNull(t,this.getStudyOrThrow());if(n)return n;throw new Error("Questionnaire ".concat(t," does not exist!"))},t.prototype.getTools=function(){return this.section.getTools()},t.prototype.getAdmin=function(){return this.section.getAdmin()},t.prototype.hasPermission=function(t,e){var n;return this.getAdmin().isLoggedIn()&&null!==(n=this.getTools().hasPermission(t,e))&&void 0!==n&&n},t.prototype.getUrl=function(t,e){return void 0===e&&(e=this.section.depth),"".concat(this.section.getHash(e),"/").concat(t)},t.prototype.goTo=function(t){window.location.hash="#"+t},t.prototype.newSection=function(t,e){void 0===e&&(e=this.section.depth),window.location.hash=-1==e?t:"".concat(this.section.getHash(e),"/").concat(t)},t.prototype.destroy=function(){},t}()},6471:(t,e,n)=>{n.d(e,{Wz:()=>w,Qu:()=>y,wj:()=>g,rq:()=>m,$b:()=>b,C9:()=>z,bi:()=>v,OI:()=>x,Pq:()=>f});var i=n(4862),o=n.n(i),r=n(9700);const s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<path d="M0 0h24v24H0z" fill="none"/>\n\t<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>\n</svg>';n(233);var a=n(2570);const l='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><path d="M0,0h24v24H0V0z" fill="none"/><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></g></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/><path d="M0 0h24v24H0z" fill="none"/>\n</svg>',h='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8V4l8 8-8 8v-4H4V8z"/></svg>';var p=n(9291);function g(t,e,n,i){return void 0===n&&(n=""),void 0===i&&(i=""),o()("div",{class:"btn clickable",onclick:e,title:n||i},t,o()("span",{class:"middle smallText"},n))}function v(t,e){return void 0===e&&(e=""),o()("div",{class:"btn btnDelete clickable",onclick:t,title:e||r.J.get("delete")},o().trust(h),o()("span",{class:"smallText highlight middle"},e))}function f(t,e){return void 0===e&&(e=""),o()("div",{class:"btn btnDelete clickable",onclick:t,title:e||r.J.get("delete")},o().trust(p),o()("span",{class:"highlight middle"},e))}function w(t,e){return void 0===e&&(e=""),g(o().trust(s),t,e,r.J.get("add"))}function y(t,e){return void 0===e&&(e=""),g(o().trust(a),t,e,r.J.get("copy"))}function m(t,e){return void 0===e&&(e=""),g(o().trust(l),t,e,r.J.get("change"))}function b(t,e){return void 0===e&&(e=""),g(o().trust(c),t,e,r.J.get("save"))}function z(t,e){return void 0===e&&(e=""),g(o().trust(u),t,e,r.J.get("reload"))}function x(t,e){return void 0===e&&(e=""),g(o().trust(d),t,e,r.J.get("transfer"))}},6969:(t,e,n)=>{n.d(e,{d:()=>r});var i=n(4862),o=n.n(i);function r(t){var e;return"string"==typeof t?o()("div",{class:"titleRow"},o()("span",{class:"title"},t)):(t.attrs.className="titleRow ".concat(null!==(e=t.attrs.className)&&void 0!==e?e:""),t)}},233:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>'},2570:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z"/></svg>'},4277:t=>{t.exports='<svg class="middle" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<path d="M0 0h24v24H0z" fill="none"/>\n\t<path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"/>\n</svg>'},9291:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"/><path fill="none" d="M0 0h24v24H0z"/></svg>'}}]);
//# sourceMappingURL=7975.bf6beafac7c2987fcd9d.js.map