"use strict";(self.webpackChunkESMira=self.webpackChunkESMira||[]).push([[8803],{8803:(t,e,n)=>{n.r(e),n.d(e,{Content:()=>d});var i,o=n(7097),r=n(4862),s=n.n(r),a=n(9700),u=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function a(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},l=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},d=function(t){function e(e){var n=t.call(this,e)||this;switch(n.studies=[],n.accessKey=n.getDynamic("accessKey",""),e.sectionValue){case"appInstall":n.targetPage="appInstall",n.titleString=a.J.get("select_a_study");break;case"statistics":n.targetPage="publicStatistics",n.titleString=a.J.get("statistics");break;default:n.targetPage="studyOverview",n.titleString=a.J.get("select_a_study")}return n}return u(e,t),e.prototype.preInit=function(){return this.loadStudies(this.accessKey.get())},e.prototype.title=function(){var t,e,n=this.section.allSections,i=this.section.depth;if(n.length>i+1){var o=n[i+1].getStaticInt("id");if(o)return null!==(e=null===(t=this.getStudyOrNull(o))||void 0===t?void 0:t.title.get())&&void 0!==e?e:this.titleString}return this.titleString},e.prototype.updateSortedStudies=function(t){var e=this.section.siteData.studyLoader.getSortedStudyList(t);switch(this.section.sectionValue){case"statistics":this.studies=e.filter((function(t){return 0!=t.publicStatistics.charts.get().length}));break;case"attend":this.studies=e.filter((function(t){return 0!=t.version.get()&&t.published.get()}));break;default:this.studies=e}},e.prototype.reloadAccessKey=function(t){var e,n;return c(this,void 0,void 0,(function(){var i,o;return l(this,(function(r){return t.preventDefault(),i=new FormData(t.target),o=null!==(n=null===(e=i.get("accessKeyInput"))||void 0===e?void 0:e.toString())&&void 0!==n?n:"",[2,this.loadStudies(o)]}))}))},e.prototype.loadStudies=function(t){return c(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:document.cookie="accessKey=".concat(t),this.accessKey.set(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.section.loader.showLoader(this.section.siteData.studyLoader.loadAvailableStudies(this.accessKey.get(),!0))];case 2:return e=n.sent(),this.section.loader.closeLoader(),this.updateSortedStudies(Object.values(e.get())),[3,4];case 3:return n.sent(),this.studies=[],[3,4];case 4:return[2]}}))}))},e.prototype.getView=function(){var t=this;return s()("div",null,s()("div",{class:"accessKeyBox"},s()("form",{method:"post",action:"",onsubmit:this.reloadAccessKey.bind(this)},s()("label",{class:"noDesc"},s()("small",null,a.J.get("accessKey")),s()("input",{name:"accessKeyInput",type:"text",value:this.accessKey.get()}),s()("input",{type:"submit",value:a.J.get("send")})))),s()("div",{class:"stickerList"},this.studies.map((function(e){return s()("div",{class:"line"},s()("span",{class:"title"},t.getStudyLinkView(e)))}))))},e.prototype.getStudyLinkView=function(t){return s()("a",{href:this.getUrl("".concat(this.targetPage,",id:").concat(t.id.get()))},t.title.get()," ",s()("i",null,this.getStudyTagInParentheses(t)))},e.prototype.getStudyTagInParentheses=function(t){var e=t.studyTag.get();return""==e?"":"("+e+")"},e}(o.R)},7097:(t,e,n)=>{n.d(e,{R:()=>i});var i=function(){function t(t){this.section=t}return t.preLoad=function(t){return[]},t.prototype.preInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.resolve()},t.prototype.hasAlternatives=function(){return!1},t.prototype.getAlternatives=function(){return null},t.prototype.titleExtra=function(){return null},t.prototype.getDynamic=function(t,e){return this.section.getDynamic(t,e)},t.prototype.setDynamic=function(t,e){this.section.siteData.dynamicValues.setChild(t,e)},t.prototype.getStaticInt=function(t){return this.section.getStaticInt(t)},t.prototype.getStaticString=function(t){return this.section.getStaticString(t)},t.prototype.getStudyOrNull=function(t){var e,n;void 0===t&&(t=null!==(e=this.getStaticInt("id"))&&void 0!==e?e:-1);var i=this.section.siteData.studyLoader.getStudies();return-1==t?1==i.getCount()&&i.getFirst()||null:null!==(n=i.getEntry(t))&&void 0!==n?n:null},t.prototype.getStudyOrThrow=function(t){var e;void 0===t&&(t=null!==(e=this.getStaticInt("id"))&&void 0!==e?e:-1);var n=this.getStudyOrNull(t);if(!n)throw new Error("Study ".concat(t," does not exist!"));return n},t.prototype.getQuestionnaireOrNull=function(t,e){var n;if(void 0===t&&(t=null!==(n=this.getStaticInt("qId"))&&void 0!==n?n:-1),void 0===e&&(e=this.getStudyOrNull()),!e)return null;for(var i=0,o=this.getStudyOrThrow().questionnaires.get();i<o.length;i++){var r=o[i];if(r.internalId.get()==t)return r}return null},t.prototype.getQuestionnaireOrThrow=function(t){var e;void 0===t&&(t=null!==(e=this.getStaticInt("qId"))&&void 0!==e?e:-1);var n=this.getQuestionnaireOrNull(t,this.getStudyOrThrow());if(n)return n;throw new Error("Questionnaire ".concat(t," does not exist!"))},t.prototype.getTools=function(){return this.section.getTools()},t.prototype.getAdmin=function(){return this.section.getAdmin()},t.prototype.hasPermission=function(t,e){var n;return this.getAdmin().isLoggedIn()&&null!==(n=this.getTools().hasPermission(t,e))&&void 0!==n&&n},t.prototype.getUrl=function(t,e){return void 0===e&&(e=this.section.depth),"".concat(this.section.getHash(e),"/").concat(t)},t.prototype.goTo=function(t){window.location.hash="#"+t},t.prototype.newSection=function(t,e){void 0===e&&(e=this.section.depth),window.location.hash=-1==e?t:"".concat(this.section.getHash(e),"/").concat(t)},t.prototype.destroy=function(){},t}()}}]);
//# sourceMappingURL=8803.34e37f6e48a1a8851040.js.map