{"version":3,"file":"1478.f985c976cd45ab5fd3ee.js","mappings":"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","sources":["webpack://ESMira/./src/frontend/ts/pages/legal.tsx","webpack://ESMira/./src/frontend/ts/site/SectionContent.tsx","webpack://ESMira/./src/frontend/ts/widgets/DashElement.tsx","webpack://ESMira/./src/frontend/ts/widgets/DashRow.tsx","webpack://ESMira/./src/frontend/ts/widgets/DragContainer.tsx","webpack://ESMira/./src/frontend/ts/widgets/NotCompatibleIcon.tsx","webpack://ESMira/./src/frontend/ts/widgets/TabBar.tsx","webpack://ESMira/./src/frontend/ts/widgets/TitleRow.tsx"],"sourcesContent":["import {SectionContent} from \"../site/SectionContent\";\nimport m, {Vnode} from \"mithril\";\nimport {DashRow} from \"../widgets/DashRow\";\nimport {DashElement} from \"../widgets/DashElement\";\nimport {Lang} from \"../singletons/Lang\";\nimport chartJsIco from \"../../imgs/libFavicons/chartJs.ico\"\nimport jsonEditorIco from \"../../imgs/libFavicons/jsonEditor.ico\"\nimport fullCalendarPng from \"../../imgs/libFavicons/fullCalendar.png\"\nimport mithrilSvg from \"../../imgs/libFavicons/mithrilJs.svg\"\nimport papaparseIco from \"../../imgs/libFavicons/papaparse.ico\"\nimport tiptapSvg from \"../../imgs/libFavicons/tiptap.svg\"\nimport webpackIco from \"../../imgs/libFavicons/webpack.ico\"\nimport ktorPng from \"../../imgs/libFavicons/ktor.png\"\nimport markwonIco from \"../../imgs/libFavicons/markwon.ico\"\nimport {Section} from \"../site/Section\";\nimport {PromiseCache} from \"../singletons/PromiseCache\";\nimport {FILE_SETTINGS} from \"../constants/urls\";\nimport {Requests} from \"../singletons/Requests\";\nimport {TabBar} from \"../widgets/TabBar\";\nimport {TitleRow} from \"../widgets/TitleRow\";\nimport {ObservablePrimitive} from \"../observable/ObservablePrimitive\";\n\nexport class Content extends SectionContent {\n\tprivate tabIndex = new ObservablePrimitive(0, null, \"legal\")\n\tprivate readonly showTabs: boolean\n\tprivate readonly impressum: string\n\tprivate readonly privacyPolicy: string\n\t\n\tpublic static preLoad(_section: Section): Promise<any>[] {\n\t\treturn [\n\t\t\tPromiseCache.get(\"legal\", () => {\n\t\t\t\treturn Requests.loadJson(FILE_SETTINGS.replace(\"%1\", Lang.code).replace(\"%2\", \"legal\"))\n\t\t\t})\n\t\t]\n\t}\n\t\n\tconstructor(section: Section, legal: {impressum: string, privacyPolicy: string}) {\n\t\tsuper(section)\n\t\tthis.impressum = legal.impressum\n\t\tthis.privacyPolicy = legal.privacyPolicy\n\t\tthis.showTabs = !!this.impressum || !! this.privacyPolicy\n\t}\n\t\n\tpublic title(): string {\n\t\treturn Lang.get(\"impressum\")\n\t}\n\t\n\tpublic getView(): Vnode<any, any> {\n\t\treturn this.showTabs\n\t\t\t? TabBar(this.tabIndex, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Lang.get(\"used_libraries\"),\n\t\t\t\t\t\tview: () => this.getLibrariesView()\n\t\t\t\t\t},\n\t\t\t\t\tthis.impressum.length != 0 && {\n\t\t\t\t\t\ttitle: Lang.get(\"impressum\"),\n\t\t\t\t\t\tview: () => <div>{m.trust(this.impressum)}</div>\n\t\t\t\t\t},\n\t\t\t\t\tthis.privacyPolicy.length != 0 && {\n\t\t\t\t\t\ttitle: Lang.get(\"privacyPolicy\"),\n\t\t\t\t\t\tview: () => <div>{m.trust(this.privacyPolicy)}</div>\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t)\n\t\t\t: <div>\n\t\t\t\t{TitleRow(Lang.getWithColon(\"used_libraries\"))}\n\t\t\t\t{this.getLibrariesView()}\n\t\t\t</div>\n\t}\n\t\n\tprivate getLibraryEntry(title: string, repository: string, iconSrc?: string): Vnode<any, any> {\n\t\treturn DashElement(null, {\n\t\t\tcontent: <div>\n\t\t\t\t<h2>\n\t\t\t\t\t{iconSrc && <img class=\"middle spacingRight\" height=\"16\" src={iconSrc} alt=\"\"/>}\n\t\t\t\t\t<span class=\"middle\">{title}</span>\n\t\t\t\t</h2>\n\t\t\t\t<a href={repository} target=\"_blank\">{repository}</a>\n\t\t\t</div>\n\t\t})\n\t}\n\t\n\tprivate getLibrariesView(): Vnode<any, any> {\n\t\treturn<div>\n\t\t\t{DashRow(\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Chart.js\",\n\t\t\t\t\t\"https://github.com/chartjs/Chart.js\",\n\t\t\t\t\tchartJsIco\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"JSON Editor\",\n\t\t\t\t\t\"https://github.com/josdejong/jsoneditor\",\n\t\t\t\t\tjsonEditorIco\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"FullCalendar\",\n\t\t\t\t\t\"https://github.com/fullcalendar/fullcalendar\",\n\t\t\t\t\tfullCalendarPng\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"markdown-it\",\n\t\t\t\t\t\"https://github.com/markdown-it/markdown-it\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Mithril.js\",\n\t\t\t\t\t\"https://github.com/MithrilJS/mithril.js\",\n\t\t\t\t\tmithrilSvg\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Papa Parse\",\n\t\t\t\t\t\"https://github.com/mholt/PapaParse\",\n\t\t\t\t\tpapaparseIco\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"qrcode-generator\",\n\t\t\t\t\t\"https://github.com/kazuhikoarase/qrcode-generator\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"tiptap\",\n\t\t\t\t\t\"https://github.com/ueberdosis/tiptap\",\n\t\t\t\t\ttiptapSvg\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"webpack\",\n\t\t\t\t\t\"https://github.com/webpack/webpack\",\n\t\t\t\t\twebpackIco\n\t\t\t\t)\n\t\t\t)}\n\t\t\t\n\t\t\t\n\t\t\t{TitleRow(Lang.getWithColon(\"Android\"))}\n\t\t\t\n\t\t\t{DashRow(\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Accompanist\",\n\t\t\t\t\t\"https://github.com/google/accompanist\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Android-Debug-Database \",\n\t\t\t\t\t\"https://github.com/amitshekhariitbhu/Android-Debug-Database\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Kotlin Multiplatform\",\n\t\t\t\t\t\"https://github.com/JetBrains/kotlin\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"kotlinx.serialization\",\n\t\t\t\t\t\"https://github.com/Kotlin/kotlinx.serialization\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Ktor\",\n\t\t\t\t\t\"https://github.com/ktorio/ktor\",\n\t\t\t\t\tktorPng\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Markwon\",\n\t\t\t\t\t\"https://github.com/noties/Markwon\",\n\t\t\t\t\tmarkwonIco\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"MPAndroidChart\",\n\t\t\t\t\t\"https://github.com/PhilJay/MPAndroidChart\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"zxing-android-embedded\",\n\t\t\t\t\t\"https://github.com/journeyapps/zxing-android-embedded\",\n\t\t\t\t),\n\t\t\t)}\n\t\t\t\n\t\t\t{TitleRow(Lang.getWithColon(\"iOS\"))}\n\t\t\t\n\t\t\t{DashRow(\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"Charts\",\n\t\t\t\t\t\"https://github.com/danielgindi/Charts\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"CodeScanner\",\n\t\t\t\t\t\"https://github.com/twostraws/CodeScanner\",\n\t\t\t\t),\n\t\t\t\tthis.getLibraryEntry(\n\t\t\t\t\t\"URLImage\",\n\t\t\t\t\t\"https://github.com/dmytro-anokhin/url-image\",\n\t\t\t\t)\n\t\t\t)}\n\t\t</div>\n\t}\n}","import m, {Vnode} from \"mithril\";\nimport {Section} from \"./Section\";\nimport {Study} from \"../data/study/Study\";\nimport {StaticValues} from \"./StaticValues\";\nimport {ObservablePrimitive} from \"../observable/ObservablePrimitive\";\nimport {Questionnaire} from \"../data/study/Questionnaire\";\nimport {DynamicValues} from \"./DynamicValues\";\nimport {PrimitiveType} from \"../observable/types/PrimitiveType\";\nimport {AccountPermissions} from \"../admin/AccountPermissions\";\nimport {AdminToolsInterface} from \"../admin/AdminToolsInterface\";\nimport {Admin} from \"../admin/Admin\";\n\nexport interface SectionAlternative {\n\ttitle: string\n\ttarget: string | false\n\theader?: boolean\n}\n\n/**\n * The dynamic content class of each section. Each section extends this class. SectionContent is a child of {@link Section} which takes care of loading and\n * displaying SectionContent.\n * Important: Changes to Observables in data.dataTypes will lead to {@link m.redraw()} (see {@link StudyLoader.constructor()}).\n * BUT, changes to the dom will happen asynchronously. In other words: The philosophy is, that {@link getView()} always works with fresh (not cached) data\n * and always constructs the full section (instead of just updating it). Mithril will take care of keeping track of changes and updates the dom when necessary.\n *\n * Method calls are guaranteed to be in this order:\n * 1. {@link preLoad()}\n * 2. {@link preInit()}\n * 3. {@link title()}, {@link titleExtra()}, {@link getView()}\n * Have a look at the implementation in {@link Section.load()} for more information\n */\nexport abstract class SectionContent {\n\tpublic readonly section: Section\n\t\n\tconstructor(section: Section) {\n\t\tthis.section = section\n\t}\n\t\n\t/**\n\t * Is always called before anything else.\n\t * @returns Promise array. The section will be in loading state and not other methods will be called as long as these Promises are loading\n\t */\n\tpublic static preLoad(_section: Section): Promise<any>[] {\n\t\treturn []\n\t}\n\t\n\t/**\n\t * Is guaranteed to run AFTER all promises in {@link preLoad()} are finished\n\t * @param _responses Holds the return values of each Promise from {@link preLoad()}\n\t */\n\tpublic preInit(... _responses: any): Promise<any> {\n\t\treturn Promise.resolve()\n\t}\n\tpublic hasAlternatives(): boolean {\n\t\treturn false\n\t}\n\tpublic getAlternatives(): SectionAlternative[] | Promise<SectionAlternative[]> | null {\n\t\treturn null\n\t}\n\t\n\tpublic abstract title(): string\n\t\n\tpublic titleExtra(): Vnode<any, any> | null {\n\t\treturn null\n\t}\n\t\n\t\n\tpublic getDynamic<T extends PrimitiveType>(key: keyof DynamicValues, defaultValue: T): ObservablePrimitive<T> {\n\t\treturn this.section.getDynamic(key, defaultValue)\n\t}\n\tpublic setDynamic<T extends PrimitiveType>(key: keyof DynamicValues, newValue: T) {\n\t\tthis.section.siteData.dynamicValues.setChild(key, newValue)\n\t}\n\tpublic getStaticInt<T extends StaticValues>(key: T): number | null {\n\t\treturn this.section.getStaticInt(key)\n\t}\n\tpublic getStaticString<T extends StaticValues>(key: T): string | null {\n\t\treturn this.section.getStaticString(key)\n\t}\n\tprotected getStudyOrNull(id: number = this.getStaticInt(\"id\") ?? -1): Study | null {\n\t\tconst studies = this.section.siteData.studyLoader.getStudies()\n\t\tif(id == -1)\n\t\t\treturn studies.getCount() == 1 ? (studies.getFirst() || null) : null\n\t\t\n\t\treturn studies.getEntry(id) ?? null\n\t}\n\tpublic getStudyOrThrow(id: number = this.getStaticInt(\"id\") ?? -1): Study {\n\t\tconst study = this.getStudyOrNull(id)\n\t\tif(!study)\n\t\t\tthrow new Error(`Study ${id} does not exist!`)\n\t\treturn study\n\t}\n\tprotected getQuestionnaireOrNull(qId: number = this.getStaticInt(\"qId\") ?? -1, study: Study | null = this.getStudyOrNull()): Questionnaire | null {\n\t\tif(!study)\n\t\t\treturn null\n\t\tconst questionnaires = this.getStudyOrThrow().questionnaires.get()\n\t\tfor(const questionnaire of questionnaires) {\n\t\t\tif(questionnaire.internalId.get() == qId)\n\t\t\t\treturn questionnaire\n\t\t}\n\t\treturn null\n\t}\n\tprotected getQuestionnaireOrThrow(qId: number = this.getStaticInt(\"qId\") ?? -1): Questionnaire {\n\t\tconst questionnaire = this.getQuestionnaireOrNull(qId, this.getStudyOrThrow())\n\t\tif(!questionnaire)\n\t\t\tthrow new Error(`Questionnaire ${qId} does not exist!`)\n\t\telse\n\t\t\treturn questionnaire\n\t}\n\t\n\tpublic getTools(): AdminToolsInterface {\n\t\treturn this.section.getTools()\n\t}\n\tpublic getAdmin(): Admin {\n\t\treturn this.section.getAdmin()\n\t}\n\t\n\tpublic hasPermission(name: keyof AccountPermissions, studyId: number): boolean {\n\t\treturn this.getAdmin().isLoggedIn() && (this.getTools().hasPermission(name, studyId) ?? false)\n\t}\n\t\n\tpublic getUrl(name: string, depth: number = this.section.depth): string {\n\t\treturn `${this.section.getHash(depth)}/${name}`\n\t}\n\tpublic goTo(target: string): void {\n\t\twindow.location.hash = \"#\"+target;\n\t}\n\tpublic newSection(target: string, depth: number = this.section.depth): void {\n\t\twindow.location.hash = depth == -1 ? target : `${this.section.getHash(depth)}/${target}`\n\t}\n\t\n\t\n\t/**\n\t * Remember: Values or references of observables should NOT be cached (also when the value is an observable itself)\n\t * It would lead to new values not being updated properly on {@link m.redraw()}\n\t *\n\t * Examples:\n\t * You can cache: {@link StudyLoader.studyCache}. Because this observable is readonly and will never be replaced\n\t * You can NOT cache {@link StudyLoader.studyCache.get()} or {@link getStudyOrThrow()} or {@link getStudy().questionnaires.get()[2]}.\n\t * \t\tBecause all study entries in StudyLoader might have been replaced or removed between {@link m.redraw()}\n\t *\n\t * You can cache: {@link SiteData.dynamicValues[\"accessKey\"]} because {@link Container} uses Singletons (see {@link Container.getOrCreateObs()})\n\t * You can not cache: {@link SiteData.dynamicValues[\"accessKey\"].get()} because its value might change\n\t *\n\t * In conclusion: {@link getView()} always needs to work with fresh values. Starting, for example, with {@link getStudyOrThrow()}\n\t */\n\tpublic abstract getView(): Vnode<any, any>\n\t\n\tpublic destroy(): void {\n\t\t//do nothing\n\t}\n}","import m, {Vnode} from \"mithril\"\nimport {NotCompatibleIcon, PossibleDevices} from \"./NotCompatibleIcon\";\n\ntype DashTemplateOptions = {\n\ttitle: string\n\ticon?: Vnode<any, any>\n\tnoCompatibilityIcon?: PossibleDevices[]\n\tmsg?: string | Vnode<any, any>\n\tinnerLinkTitle?: string\n\tinnerLinkHref?: string\n}\n\ntype DashContainerOptions = \"stretched\" | \"cramped\" | \"vertical\" | \"horizontal\" | null\nexport type DashViewOptions = {\n\tdisabled?: boolean\n\tonclick?: (e: MouseEvent) => void\n\thref?: string\n\tshowAsClickable?: boolean\n\tfloating?: boolean\n\tfloatingRight?: boolean\n\thighlight?: boolean\n\tsmall?: boolean\n\ttemplate?: DashTemplateOptions\n\tcontent?: Vnode<any, any>\n}\n\nfunction DashTemplateView(options: DashTemplateOptions): Vnode<any, any> {\n\treturn (\n\t\t<div>\n\t\t\t{(options.icon || options.noCompatibilityIcon) &&\n\t\t\t\t<div class=\"dashIcon\">\n\t\t\t\t\t{options.icon}\n\t\t\t\t\t{options.noCompatibilityIcon && NotCompatibleIcon(... options.noCompatibilityIcon)}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t\n\t\t\t<div class=\"dashTitle\">{options.title}</div>\n\t\t\t{options.msg && <p class=\"dashMsg\">{options.msg}</p>}\n\t\t\t{options.innerLinkTitle && options.innerLinkHref && <a class=\"link\" href={options.innerLinkHref}>{options.innerLinkTitle}</a>}\n\t\t</div>\n\t)\n}\n\nfunction DashElementView(options: DashViewOptions): Vnode<any, any> {\n\tlet classString = \"dashEl\"\n\tif(options.floatingRight)\n\t\tclassString += \" floating right\"\n\telse if(options.floating)\n\t\tclassString += \" floating\"\n\t\n\tif(options.small)\n\t\tclassString += \" small\"\n\tif(options.highlight)\n\t\tclassString += \" highlight\"\n\tif(options.disabled)\n\t\tclassString += \" disabled\"\n\t\n\tlet view: Vnode<any, any>\n\tif(options.content)\n\t\tview = options.content\n\telse if(options.template)\n\t\tview = DashTemplateView(options.template)\n\telse\n\t\tview = <div class=\"highlight\">Missing Dash Information</div>\n\t\n\tif(options.href) {\n\t\treturn <a target={options.href.startsWith(\"http\") ? \"_blank\" : \"\"} class={`${classString} dashLink`} href={options.href}>{view}</a>\n\t}\n\telse if(options.onclick)\n\t\treturn <a class={`${classString} dashLink`} onclick={options.onclick}>{view}</a>\n\telse if(options.showAsClickable)\n\t\treturn <a class={`${classString} dashLink`}>{view}</a>\n\telse {\n\t\tview.attrs[\"className\"] = `${classString} ${view.attrs.hasOwnProperty(\"className\") ? view.attrs[\"className\"] : \"\"}`\n\t\treturn view\n\t}\n}\n\nfunction getNewClassString(size: DashContainerOptions, oldClassString: string): string {\n\tif(size)\n\t\toldClassString += \" \" + size\n\treturn oldClassString\n}\n\nexport function DashElement(\n\tsize: DashContainerOptions,\n\t... options: (DashViewOptions | false)[]\n): Vnode<any, any> {\n\tif(options.length == 1) {\n\t\tif(!options[0])\n\t\t\treturn <div></div>\n\t\t\n\t\tconst view =  DashElementView(options[0])\n\t\tview.attrs[\"className\"] = getNewClassString(size, view.attrs[\"className\"])\n\t\treturn view\n\t}\n\telse {\n\t\tconst classString = getNewClassString(size, \"multipleChildren\")\n\t\treturn <div class={classString}>\n\t\t\t{options.map((option) => option && DashElementView(option))}\n\t\t</div>\n\t}\n}","import m, {Vnode} from \"mithril\"\nexport function DashRow(... content: Array<Vnode<any, any> | undefined | false>): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"dashRow\">{content}</div>\n\t)\n}","import m, {Component, Vnode, VnodeDOM} from \"mithril\"\nimport addSvg from \"../../imgs/icons/dragHandle.svg?raw\"\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {ArrayInterface} from \"../observable/interfaces/ArrayInterface\";\n\nexport interface DragTools {\n\tgetDragTarget(index: number, targetList: ArrayType, content?: Vnode<any, any>): Vnode<any, any>\n\tgetDragStarter(index: number, dragTarget: ArrayType): Vnode<any, any>\n}\n\ntype ArrayType = ArrayInterface<any, BaseObservable<any>>\n\ninterface DragContainerImpOptions {\n\tcontent: (container: DragTools) => Vnode<any, any>\n}\nclass DragContainerImp implements DragTools, Component<DragContainerImpOptions, any> {\n\tprivate contentVNode?: VnodeDOM<any, any>\n\tprivate currentStartList?: ArrayType\n\tprivate currentTargetList?: ArrayType\n\tprivate currentStartIndex: number = 0\n\tprivate currentTargetIndex: number = 0\n\tprivate currentDragClone?: HTMLElement\n\tprivate currentStartElement?: HTMLElement\n\tprivate startIndex: number = 0\n\t\n\tpublic getDragTarget(index: number, targetList: ArrayType, content: Vnode<any, any> = <div></div>): Vnode<any, any> {\n\t\tcontent.attrs[\"className\"] = `dragTarget ${content.attrs[\"className\"] ?? \"\"}`\n\t\tcontent.attrs[\"ondragend\"] = this.ondragend.bind(this)\n\t\tcontent.attrs[\"ondragenter\"] = this.ondragenter.bind(this, index, targetList)\n\t\treturn content\n\t}\n\t\n\tpublic getDragStarter(index: number, targetList: ArrayType): Vnode<any, any> {\n\t\treturn <div class=\"btn clickable dragStarter\" draggable=\"true\" ondragstart={this.ondragstart.bind(this, index, targetList)}>\n\t\t\t{m.trust(addSvg)}\n\t\t</div>\n\t}\n\t\n\t\n\tprivate getIndexInContainer(searchEl: HTMLElement): number {\n\t\tconst htmlCollection = this.contentVNode?.dom.getElementsByClassName(\"dragTarget\")\n\t\tif(htmlCollection) {\n\t\t\tfor(let i = htmlCollection.length - 1; i >= 0; --i) {\n\t\t\t\tif(htmlCollection[i] === searchEl)\n\t\t\t\t\treturn i\n\t\t\t}\n\t\t}\n\t\treturn -1\n\t}\n\t\n\tprivate addDragSpacer(locationEl: HTMLElement): void {\n\t\tlet insertBefore: Element | null = locationEl //when insertBefore is null, currentDragClone will be placed at the end\n\t\tif(!this.currentDragClone)\n\t\t\treturn\n\t\tif(this.currentDragClone.parentNode) {\n\t\t\tconst locationIndex = this.getIndexInContainer(locationEl)\n\t\t\tconst spacerIndex = this.getIndexInContainer(this.currentDragClone)\n\t\t\t\n\t\t\tif(spacerIndex < this.startIndex) { //mouse moved up (/right) from starting point\n\t\t\t\tif(spacerIndex < locationIndex) { //mouse is moving down (/left) again\n\t\t\t\t\tinsertBefore = locationEl.nextElementSibling\n\t\t\t\t\t++this.currentTargetIndex\n\t\t\t\t}\n\t\t\t}\n\t\t\telse { //mouse moved down (/left) from starting point\n\t\t\t\t\n\t\t\t\t//we need to add one to targetIndex.\n\t\t\t\t// But when we are in the same list, removing the item (before moving it) means that targetIndex points to the element afterwards anyway.\n\t\t\t\t// But when we are in another list, we need to correct manually:\n\t\t\t\tif(this.currentStartList != this.currentTargetList)\n\t\t\t\t\t++this.currentTargetIndex\n\t\t\t\t\n\t\t\t\tif(spacerIndex > locationIndex) //mouse is moving up (/right) again\n\t\t\t\t\t--this.currentTargetIndex\n\t\t\t\telse\n\t\t\t\t\tinsertBefore = locationEl.nextElementSibling\n\t\t\t}\n\t\t\tthis.currentDragClone.parentNode.removeChild(this.currentDragClone)\n\t\t}\n\t\tlocationEl.parentNode?.insertBefore(this.currentDragClone, insertBefore)\n\t}\n\t\n\tprivate ondragstart(index: number, targetList: ArrayType, e: DragEvent): boolean {\n\t\tlet targetElement = e.currentTarget as HTMLElement\n\t\twhile(targetElement && !targetElement.classList.contains(\"dragTarget\")) {\n\t\t\ttargetElement = targetElement.parentNode as HTMLElement\n\t\t}\n\t\tconst dragRoot = this.contentVNode?.dom\n\t\tif(!dragRoot)\n\t\t\treturn false\n\t\t\n\t\t\n\t\tthis.startIndex = this.getIndexInContainer(targetElement)\n\t\t\n\t\tthis.currentStartList = targetList\n\t\tthis.currentStartIndex = index\n\t\t\n\t\tthis.currentDragClone = targetElement.cloneNode(true) as HTMLElement\n\t\tthis.currentDragClone?.classList.add(\"drag_spacer\")\n\t\t\n\t\tthis.currentDragClone?.addEventListener(\"dragover\", this.ondragover.bind(this))\n\t\tthis.currentDragClone?.addEventListener(\"dragleave\", this.ondragleave.bind(this))\n\t\tthis.currentDragClone?.addEventListener(\"drop\", this.ondrop.bind(this))\n\t\t\n\t\ttargetElement.classList.add(\"dragStarted\")\n\t\te.dataTransfer?.setDragImage(targetElement, 0, 0)\n\t\t\n\t\t\n\t\tthis.currentStartElement = targetElement\n\t\t\n\t\twindow.setTimeout( () => {\n\t\t\t//in firefox: setDragImage() seems to stop working when the class of document.body is changed\n\t\t\t//in chrome: DOM changes seem to cancel dragging altogether\n\t\t\t//solution: doing this stuff in a different \"thread\" seems to do the trick\n\t\t\tthis.addDragSpacer(targetElement)\n\t\t\tdragRoot.classList.add(\"is_dragging\")\n\t\t}, 0)\n\t\treturn true\n\t}\n\tprivate ondragend(e: DragEvent): void {\n\t\tthis.ondragleave(e)\n\t\te.preventDefault()\n\t\t\n\t\tthis.contentVNode?.dom.classList.remove(\"is_dragging\")\n\t\tthis.currentStartElement?.classList.remove(\"dragStarted\")\n\t\tif(this.currentDragClone?.parentNode)\n\t\t\tthis.currentDragClone.parentNode.removeChild(this.currentDragClone)\n\t\t\n\t\tthis.currentDragClone = undefined\n\t}\n\tprivate ondragenter(index: number, targetList: ArrayType, e: DragEvent): false {\n\t\tconst targetElement = e.currentTarget as HTMLElement\n\t\tif(!this.contentVNode?.dom.contains(targetElement))\n\t\t\treturn false\n\t\t\n\t\tif(e.dataTransfer)\n\t\t\te.dataTransfer.dropEffect = \"none\"\n\t\te.preventDefault()\n\t\t\n\t\tthis.currentTargetList = targetList\n\t\tthis.currentTargetIndex = index\n\t\t\n\t\tthis.addDragSpacer(targetElement)\n\t\treturn false\n\t}\n\t\n\tprivate ondragover(e: DragEvent): void {\n\t\te.preventDefault()\n\t\tif(e.dataTransfer)\n\t\t\te.dataTransfer.dropEffect = \"move\"\n\t}\n\tprivate ondragleave(e: DragEvent): void {\n\t\te.preventDefault()\n\t}\n\tprivate ondrop(e: DragEvent): void {\n\t\te.preventDefault()\n\t\t\n\t\tif(this.currentStartList == null || this.currentTargetList == null)\n\t\t\treturn\n\t\t\n\t\tif(this.currentTargetList == this.currentStartList)\n\t\t\tthis.currentTargetList.move(this.currentStartIndex, this.currentTargetIndex)\n\t\telse\n\t\t\tthis.currentTargetList.moveFromOtherList(this.currentStartList, this.currentStartIndex, this.currentTargetIndex)\n\t\t\n\t\tthis.currentStartList = this.currentTargetList = undefined\n\t\tthis.ondragend(e)\n\t}\n\t\n\tpublic onupdate(vNode: VnodeDOM<DragContainerImpOptions, any>): void {\n\t\tthis.contentVNode = vNode\n\t}\n\t\n\tpublic view(vNode: Vnode<DragContainerImpOptions, any>): Vnode<any, any> {\n\t\treturn vNode.attrs.content(this)\n\t}\n}\n\n\nexport function DragContainer(\n\tcontent: (container: DragTools) => Vnode<any, any>\n): Vnode<any, any> {\n\treturn m(DragContainerImp, { content: content })\n}","import m, {Vnode} from \"mithril\"\nimport {Lang} from \"../singletons/Lang\";\nimport androidSvg from \"../../imgs/devices/android.svg?raw\"\nimport iosSvg from \"../../imgs/devices/ios.svg?raw\"\nimport webSvg from \"../../imgs/devices/web.svg?raw\"\nimport {closeDropdown, openDropdown} from \"./DropdownMenu\";\n\n\nexport type PossibleDevices = \"Android\" | \"iOS\" | \"Web\"\n\nconst imageRecord: Record<PossibleDevices, string> = {\n\tAndroid: androidSvg,\n\tiOS: iosSvg,\n\tWeb: webSvg\n}\n\nfunction onPointerEnter(title: string, e: MouseEvent) {\n\topenDropdown(\"notCompatible\", e.target as HTMLElement,\n\t\t() => <div class=\"smallText center\">{title}</div>\n\t)\n}\nfunction onPointerLeave() {\n\tcloseDropdown(\"notCompatible\")\n}\n\nexport function NotCompatibleIcon(... devices: PossibleDevices[]): Vnode<any, any> {\n\tconst translationRecord: Record<PossibleDevices, string> = {\n\t\tAndroid: Lang.get(\"Android\"),\n\t\tiOS: Lang.get(\"iOS\"),\n\t\tWeb: Lang.get(\"web_questionnaire\")\n\t}\n\tconst title = Lang.get(\"not_compatible_with\", devices.map((device) => translationRecord[device]).join(\", \"))\n\treturn <div class=\"notCompatibleIcon\" onpointerenter={onPointerEnter.bind(null, title)} onpointerleave={onPointerLeave.bind(null)}>\n\t\t{devices.map((device) =>\n\t\t\t<div class=\"deviceIcon\">{m.trust(imageRecord[device])}</div>)}\n\t</div>\n\n}\n","import m, {Vnode} from \"mithril\"\nimport {ObservablePrimitive} from \"../observable/ObservablePrimitive\";\nimport {DragContainer} from \"./DragContainer\";\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {ArrayInterface} from \"../observable/interfaces/ArrayInterface\";\n\nexport interface TabContent {\n\ttitle: string | Vnode<any, any>\n\tdraggableList?: ArrayInterface<any, BaseObservable<any>>\n\thighlight?: boolean\n\tview: () => Vnode<any, any>\n}\n\nexport function TabBar(selectedIndex: ObservablePrimitive<number>, tabs: (TabContent | undefined | false)[], smallBar: boolean = false, addBtnCallback?: (e: MouseEvent) => void): Vnode<any, any> {\n\tif(!tabs.length)\n\t\treturn (<div></div>)\n\t\n\tif(selectedIndex.get() >= tabs.length)\n\t\tselectedIndex.set(0)\n\treturn (\n\t\tDragContainer((dragTools) => {\n\t\t\tconst selectedTab = tabs[selectedIndex.get()]\n\t\t\treturn <div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class={smallBar ? \"tabBar smallBar\" : \"tabBar\"}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttabs.map((tab, index) => {\n\t\t\t\t\t\t\t\tif(!tab)\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\tconst className = `tab ${(selectedIndex.get() == index) ? \"selected\" : \"\"} ${tab.highlight ? \"highlight\" : \"\"}`\n\t\t\t\t\t\t\t\tconst content = <div class={className} onclick={() => {selectedIndex.set(index)}}>\n\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t{tab.draggableList && dragTools.getDragStarter(index, tab.draggableList)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class=\"middle\">{tab.title}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\treturn tab.draggableList\n\t\t\t\t\t\t\t\t\t? dragTools.getDragTarget(index, tab.draggableList, content)\n\t\t\t\t\t\t\t\t\t: content\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{addBtnCallback &&\n\t\t\t\t\t\t\t<div class=\"tab addBtn\" onclick={addBtnCallback}>\n\t\t\t\t\t\t\t\t<span class=\"middle\">+</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tabContent\">\n\t\t\t\t\t{selectedTab && selectedTab.view()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t})\n\t)\n}","import m, {Vnode} from \"mithril\"\nexport function TitleRow(\n\ttitle: string | Vnode<any, any>\n): Vnode<any, any> {\n\tif(typeof title == \"string\") {\n\t\treturn <div class=\"titleRow\">\n\t\t\t<span class=\"title\">{title}</span>\n\t\t</div>\n\t}\n\telse {\n\t\ttitle.attrs[\"className\"] = `titleRow ${title.attrs[\"className\"] ?? \"\"}`\n\t\treturn title\n\t}\n}"],"names":["section","legal","tabIndex","ObservablePrimitive","impressum","privacyPolicy","showTabs","preLoad","_section","PromiseCache","get","Requests","loadJson","replace","Lang","code","title","getView","this","TabBar","view","getLibrariesView","length","TitleRow","getWithColon","getLibraryEntry","repository","iconSrc","DashElement","content","class","height","src","alt","href","target","DashRow","SectionContent","preInit","Promise","resolve","hasAlternatives","getAlternatives","titleExtra","getDynamic","key","defaultValue","setDynamic","newValue","siteData","dynamicValues","setChild","getStaticInt","getStaticString","getStudyOrNull","id","studies","studyLoader","getStudies","getCount","getFirst","getEntry","getStudyOrThrow","study","Error","getQuestionnaireOrNull","qId","questionnaires","questionnaire","internalId","getQuestionnaireOrThrow","getTools","getAdmin","hasPermission","name","studyId","isLoggedIn","getUrl","depth","getHash","goTo","window","location","hash","newSection","destroy","DashElementView","options","classString","floatingRight","floating","small","highlight","disabled","template","icon","noCompatibilityIcon","msg","innerLinkTitle","innerLinkHref","DashTemplateView","startsWith","onclick","showAsClickable","attrs","hasOwnProperty","getNewClassString","size","oldClassString","map","option","currentStartIndex","currentTargetIndex","startIndex","getDragTarget","index","targetList","ondragend","bind","ondragenter","getDragStarter","draggable","ondragstart","getIndexInContainer","searchEl","htmlCollection","contentVNode","dom","getElementsByClassName","i","addDragSpacer","locationEl","insertBefore","currentDragClone","parentNode","locationIndex","spacerIndex","nextElementSibling","currentStartList","currentTargetList","removeChild","e","targetElement","currentTarget","classList","contains","dragRoot","cloneNode","add","addEventListener","ondragover","ondragleave","ondrop","dataTransfer","setDragImage","currentStartElement","setTimeout","preventDefault","remove","undefined","dropEffect","move","moveFromOtherList","onupdate","vNode","DragContainer","DragContainerImp","imageRecord","Android","iOS","Web","onPointerEnter","onPointerLeave","NotCompatibleIcon","translationRecord","devices","device","join","onpointerenter","onpointerleave","selectedIndex","tabs","smallBar","addBtnCallback","set","dragTools","selectedTab","tab","className","draggableList"],"sourceRoot":""}