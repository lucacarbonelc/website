{"version":3,"file":"39.a6bcc20e71b46df77ddb.js","mappings":"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","sources":["webpack://ESMira/./src/frontend/ts/helpers/InputOptionDesigner.tsx","webpack://ESMira/./src/frontend/ts/pages/inputEdit.tsx","webpack://ESMira/./src/frontend/ts/widgets/BtnWidgets.tsx","webpack://ESMira/./src/frontend/ts/widgets/DragContainer.tsx","webpack://ESMira/./src/frontend/ts/widgets/SearchWidget.tsx","webpack://ESMira/./src/frontend/ts/widgets/TitleRow.tsx"],"sourcesContent":["import m, {Vnode} from \"mithril\";\nimport {Input, InputResponseType} from \"../data/study/Input\";\nimport {Study} from \"../data/study/Study\";\nimport {Lang} from \"../singletons/Lang\";\nimport {BindObservable} from \"../widgets/BindObservable\";\nimport {ObservableLangChooser} from \"../widgets/ObservableLangChooser\";\nimport {DragContainer} from \"../widgets/DragContainer\";\nimport {DashRow} from \"../widgets/DashRow\";\nimport {RichText} from \"../widgets/RichText\";\nimport {PrimitiveType} from \"../observable/types/PrimitiveType\";\nimport {DashElement} from \"../widgets/DashElement\";\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {NotCompatibleIcon, PossibleDevices} from \"../widgets/NotCompatibleIcon\";\nimport {BtnAdd, BtnTrash} from \"../widgets/BtnWidgets\";\nimport { CodeEditor } from \"../widgets/CodeEditor\";\n\n\nconst InputCategories = {\n\t\"passive\": Lang.get(\"input_category_passive\"),\n\t\"classic\": Lang.get(\"input_category_classic\"),\n\t\"special\": Lang.get(\"input_category_special\"),\n\t\"sensor\": Lang.get(\"input_category_sensor\"),\n\t\"media\": Lang.get(\"input_category_media\"),\n}\n\ntype InputType = Record<InputResponseType, InputEntry>\n\n\nexport interface InputEntry {\n\ttitle: string\n\thelpUrl: string\n\tcategory: keyof typeof InputCategories\n\tnotCompatible?: PossibleDevices[]\n\tview: () => Vnode<any, any>[]\n}\n\nexport class InputOptionDesigner {\n\tpublic readonly study: Study\n\tpublic readonly input: Input\n\tpublic readonly getUrl: (name: string) => string\n\tpublic readonly goTo: (name: string) => void\n\t\n\t\n\tprivate readonly inputTypes: InputType = {\n\t\t\"app_usage\": {\n\t\t\ttitle: Lang.get(\"input_app_usage\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#App-usage-tracking\",\n\t\t\tcategory: \"sensor\",\n\t\t\tnotCompatible: [\"Web\", \"iOS\"],\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t</div>,\n\t\t\t\t<div>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<small>{Lang.get(\"packageId\")}</small>\n\t\t\t\t\t\t<input class=\"big\" type=\"text\" { ... BindObservable(this.input.packageId) }/>\n\t\t\t\t\t\t<small>{Lang.get(\"packageId_desc\")}</small>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t]\n\t\t\t\n\t\t},\n\t\t\"binary\": {\n\t\t\ttitle: Lang.get(\"input_binary\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Binary-item\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t</div>,\n\t\t\t\tthis.defaultValueOption(),\n\t\t\t\tthis.leftRightLabelOption()\n\t\t\t]\n\t\t},\n\t\t\"bluetooth_devices\": {\n\t\t\ttitle: Lang.get(\"input_bluetooth_devices\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#List-of-bluetooth-devices\",\n\t\t\tcategory: \"sensor\",\n\t\t\tnotCompatible: [\"Web\"],\n\t\t\tview: () => this.onlyRequiredAndDefaultOptions()\n\t\t},\n\t\t\"compass\": {\n\t\t\ttitle: Lang.get(\"input_compass\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Compass-item\",\n\t\t\tcategory: \"sensor\",\n\t\t\tnotCompatible: [\"Web\"],\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.showValueOption()}\n\t\t\t\t\t{this.checkedOptionElement(this.input.numberHasDecimal, Lang.get(\"allow_decimal_input\"))}\n\t\t\t\t</div>,\n\t\t\t\tthis.defaultValueOption()\n\t\t\t]\n\t\t},\n\t\t\"countdown\": {\n\t\t\ttitle: Lang.get(\"input_countdown\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Countdown-item\",\n\t\t\tcategory: \"special\",\n\t\t\tnotCompatible: [\"Web\"],\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.showValueOption()}\n\t\t\t\t</div>,\n\t\t\t\t<div>\n\t\t\t\t\t<label class=\"vertical noDesc\">\n\t\t\t\t\t\t<small>{Lang.get(\"timeout\")}</small>\n\t\t\t\t\t\t<input type=\"text\" { ... BindObservable(this.input.timeoutSec) }/>\n\t\t\t\t\t\t<small>{Lang.get(\"seconds\")}</small>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"vertical noDesc\">\n\t\t\t\t\t\t<input type=\"checkbox\" { ... BindObservable(this.input.playSound) }/>\n\t\t\t\t\t\t<span>{Lang.get(\"play_sound_when_finished\")}</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t]\n\t\t},\n\t\t\"date\": {\n\t\t\ttitle: Lang.get(\"input_date\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Date-input\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => this.onlyRequiredAndDefaultOptions()\n\t\t},\n\t\t\"duration\": {\n\t\t\ttitle: Lang.get(\"input_duration\"),\n\t\t\thelpUrl: \"\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => this.onlyRequiredAndDefaultOptions()\n\t\t},\n\t\t\"dynamic_input\": {\n\t\t\ttitle: Lang.get(\"input_dynamic_input\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Dynamic-item\",\n\t\t\tcategory: \"special\",\n\t\t\tview: () => {\n\t\t\t\tconst removeSubInput = (index: number) => {\n\t\t\t\t\tthis.input.subInputs.remove(index)\n\t\t\t\t}\n\t\t\t\tconst addSubInput = () => {\n\t\t\t\t\tthis.input.subInputs.push({})\n\t\t\t\t\t// this.goTo()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn [\n\t\t\t\t\t<label class=\"vertical noTitle noDesc\">\n\t\t\t\t\t\t<input type=\"checkbox\" {...BindObservable(this.input.random)}/>\n\t\t\t\t\t\t<span>{Lang.get(\"random\")}</span>\n\t\t\t\t\t</label>,\n\t\t\t\t\t<div class=\"stretched\">\n\t\t\t\t\t\t<h2>{Lang.getWithColon(\"choices\")}</h2>{\n\t\t\t\t\t\tDragContainer((dragTools) => {\n\t\t\t\t\t\t\treturn <div class=\"listParent\">\n\t\t\t\t\t\t\t\t<div class=\"listChild\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.input.subInputs.get().map((subInput, index) => {\n\t\t\t\t\t\t\t\t\t\t\treturn dragTools.getDragTarget(index, this.input.subInputs,\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"vertical\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dragTools.getDragStarter(index, this.input.subInputs)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{BtnTrash(removeSubInput.bind(this, index))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={this.getUrl(`inputEdit,subInput:${index}`)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${index}: ${Lang.getDynamic(\"input_\" + subInput.responseType.get())}${subInput.required.get() ? \"*\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<div class=\"spacingTop center\">\n\t\t\t\t\t\t\t\t\t\t{BtnAdd(addSubInput.bind(this), Lang.get(\"add\"))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t})\n\t\t\t\t\t}</div>\n\t\t\t\t\t\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t\"file_upload\": {\n\t\t\ttitle: Lang.get(\"input_file_upload\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Image-upload\",\n\t\t\tcategory: \"media\",\n\t\t\tview: () => this.onlyRequiredAndDefaultOptions()\n\t\t},\n\t\t\"image\": {\n\t\t\ttitle: Lang.get(\"input_image\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Image\",\n\t\t\tcategory: \"passive\",\n\t\t\tview: () =>\n\t\t\t\t[ this.urlOption() ]\n\t\t\t\n\t\t},\n\t\t\"likert\": {\n\t\t\ttitle: Lang.get(\"input_likert\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Likert-scale\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.showValueOption()}\n\t\t\t\t</div>,\n\t\t\t\t<div>\n\t\t\t\t\t{this.inputOptionElement(this.input.likertSteps, Lang.get(\"likert_number_of_points\"))}\n\t\t\t\t</div>,\n\t\t\t\tthis.leftRightLabelOption(),\n\t\t\t\t<div>\n\t\t\t\t<label class=\"spacingTop\">\n\t\t\t\t\t<small>{Lang.get(\"vertical\")}</small>\n\t\t\t\t\t<input type=\"checkbox\" { ... BindObservable(this.input.vertical) }/>\n\t\t\t\t\t<small>{Lang.get(\"likert_vertical_explanation\")}</small>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t]\n\t\t},\n\t\t\"list_multiple\": {\n\t\t\ttitle: Lang.get(\"input_list_multiple\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#List-multiple-choice\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.otherOption()}\n\t\t\t\t</div>,\n\t\t\t\tthis.defaultValueOption(),\n\t\t\t\tthis.itemsOption()\n\t\t\t]\n\t\t},\n\t\t\"list_single\": {\n\t\t\ttitle: Lang.get(\"input_list_single\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#List-single-choice\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.checkedOptionElement(this.input.asDropDown, Lang.get(\"show_as_dropdown\"))}\n\t\t\t\t\t{this.checkedOptionElement(this.input.forceInt, Lang.get(\"save_as_number\"))}\n\t\t\t\t\t{this.otherOption()}\n\t\t\t\t</div>,\n\t\t\t\tthis.defaultValueOption(),\n\t\t\t\tthis.itemsOption()\n\t\t\t]\n\t\t},\n\t\t\"location\": {\n\t\t\ttitle: Lang.get(\"input_location\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#location-item\",\n\t\t\tcategory: \"sensor\",\n\t\t\tnotCompatible: [\"Web\"],\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t</div>,\n\t\t\t\t<div>\n\t\t\t\t\t<label class=\"spacingTop\">\n\t\t\t\t\t\t<small>{Lang.get(\"input_location_resolution\")}</small>\n\t\t\t\t\t\t<input type=\"number\" { ... BindObservable(this.input.resolution) }/>\n\t\t\t\t\t\t<small>{Lang.get(\"input_location_resolution_desc\")}</small>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t]\n\t\t},\n\t\t\"number\": {\n\t\t\ttitle: Lang.get(\"input_number\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Number-input\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.checkedOptionElement(this.input.numberHasDecimal, Lang.get(\"allow_decimal_input\"))}\n\t\t\t\t</div>,\n\t\t\t\tthis.defaultValueOption()\n\t\t\t]\n\t\t},\n\t\t\"photo\": {\n\t\t\ttitle: Lang.get(\"input_photo\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Take-a-picture\",\n\t\t\tcategory: \"media\",\n\t\t\tview: () => [ \n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t</div>,\n\t\t\t\t<div>\n\t\t\t\t\t<label class=\"spacingTop\">\n\t\t\t\t\t\t<small>{Lang.get(\"image_input_quality\")}</small>\n\t\t\t\t\t\t<input type=\"number\" { ... BindObservable(this.input.quality) }/>\n\t\t\t\t\t\t<small>{Lang.get(\"image_input_quality_desc\")}</small>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t]\n\t\t},\n\t\t\"record_audio\": {\n\t\t\ttitle: Lang.get(\"input_record_audio\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Record-audio\",\n\t\t\tcategory: \"media\",\n\t\t\tnotCompatible: [\"Web\"],\n\t\t\tview: () => this.onlyRequiredAndDefaultOptions()\n\t\t},\n\t\t\"share\": {\n\t\t\ttitle: Lang.get(\"input_share\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Share-item\",\n\t\t\tcategory: \"special\",\n\t\t\tview: () => [\n\t\t\t\tthis.requiredOption(),\n\t\t\t\tthis.urlOption()\n\t\t\t]\n\t\t},\n\t\t\"text\": {\n\t\t\ttitle: Lang.get(\"input_text\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Simple-text-view\",\n\t\t\tcategory: \"passive\",\n\t\t\tview: () => []\n\t\t},\n\t\t\"text_input\": {\n\t\t\ttitle: Lang.get(\"input_text_input\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Text-input\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => this.onlyRequiredAndDefaultOptions()\n\t\t},\n\t\t\"time\": {\n\t\t\ttitle: Lang.get(\"input_time\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Time-input\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.checkedOptionElement(this.input.forceInt, Lang.get(\"save_as_minutes\"))}\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t</div>,\n\t\t\t\tthis.defaultValueOption()\n\t\t\t]\n\t\t},\n\t\t\"va_scale\": {\n\t\t\ttitle: Lang.get(\"input_va_scale\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Visual-analogue-scale\",\n\t\t\tcategory: \"classic\",\n\t\t\tview: () => [\n\t\t\t\t<div>\n\t\t\t\t\t{this.requiredOption()}\n\t\t\t\t\t{this.showValueOption()}\n\t\t\t\t</div>,\n\t\t\t\t<div>\n\t\t\t\t\t{this.inputOptionElement(this.input.defaultValue, Lang.get(\"prefilledValue\"), \"\", \"number\")}\n\t\t\t\t\t<label class=\"spacingTop\">\n\t\t\t\t\t\t<small>{Lang.get(\"max_value\")}</small>\n\t\t\t\t\t\t<input type=\"number\" { ... BindObservable(this.input.maxValue) }/>\n\t\t\t\t\t\t<small>{Lang.get(\"max_value_vas_desc\")}</small>\n\t\t\t\t\t</label>\n\t\t\t\t</div>,\n\t\t\t\tthis.leftRightLabelOption()\n\t\t\t]\n\t\t},\n\t\t\"video\": {\n\t\t\ttitle: Lang.get(\"input_video\"),\n\t\t\thelpUrl: \"https://github.com/KL-Psychological-Methodology/ESMira/wiki/Questionnaire-Items#Video\",\n\t\t\tcategory: \"passive\",\n\t\t\tview: () => [\n\t\t\t\tthis.requiredOption(),\n\t\t\t\tthis.urlOption()\n\t\t\t]\n\t\t}\n\t}\n\tprivate readonly sortedInputTypeKeys: InputResponseType[]\n\t\n\tconstructor(study: Study, input: Input, getUrl: (name: string) => string, goTo: (name: string) => void) {\n\t\tthis.study = study\n\t\tthis.input = input\n\t\tthis.getUrl = getUrl\n\t\tthis.goTo = goTo\n\t\t\n\t\tconst inputTypeKeys = Object.keys(this.inputTypes) as InputResponseType[]\n\t\tinputTypeKeys.sort((a, b) => {\n\t\t\tconst titleA = this.inputTypes[a].title\n\t\t\tconst titleB = this.inputTypes[b].title\n\t\t\tif(titleA == titleB)\n\t\t\t\treturn 0\n\t\t\telse\n\t\t\t\treturn titleA > titleB ? 1 : -1\n\t\t})\n\t\tthis.sortedInputTypeKeys = inputTypeKeys\n\t}\n\t\n\tprivate onlyRequiredAndDefaultOptions(): Vnode<any, any>[] {\n\t\treturn [\n\t\t\t<div>{this.requiredOption()}</div>,\n\t\t\tthis.defaultValueOption()\n\t\t]\n\t}\n\t\n\tprivate inputOptionElement(obs: BaseObservable<PrimitiveType>, title: string, className= \"\", type = \"text\"): Vnode<any, any> {\n\t\treturn <label class=\"line noDesc\">\n\t\t\t<small>{title}</small>\n\t\t\t<input type={type} class={className} { ... BindObservable(obs) }/>\n\t\t\t{ObservableLangChooser(this.study)}\n\t\t</label>\n\t}\n\tprivate checkedOptionElement(obs: BaseObservable<PrimitiveType>, title: string): Vnode<any, any> {\n\t\treturn <label class=\"line noTitle noDesc\">\n\t\t\t<input type=\"checkbox\" { ... BindObservable(obs) }/>\n\t\t\t<span>{title}</span>\n\t\t</label>\n\t}\n\t\n\tprivate urlOption(): Vnode<any, any> {\n\t\treturn <div class=\"stretched\">\n\t\t\t{this.inputOptionElement(this.input.url, Lang.get(\"url\"), \"big\", \"url\")}\n\t\t</div>\n\t}\n\tprivate requiredOption(): Vnode<any, any> {\n\t\treturn this.checkedOptionElement(this.input.required, Lang.get(\"required_desc\"))\n\t}\n\tprivate showValueOption(): Vnode<any, any> {\n\t\treturn this.checkedOptionElement(this.input.showValue, Lang.get(\"show_value\"))\n\t}\n\tprivate defaultValueOption(): Vnode<any, any> {\n\t\treturn <div>\n\t\t\t<label class=\"line noDesc\">\n\t\t\t\t<small>{Lang.get(\"prefilledValue\")}</small>\n\t\t\t\t<input type=\"text\" class=\"big\" disabled={this.input.required.get()} { ... BindObservable(this.input.defaultValue) }/>\n\t\t\t\t{ObservableLangChooser(this.study)}\n\t\t\t</label>\n\t\t</div>\n\t}\n\tprivate leftRightLabelOption(): Vnode<any, any> {\n\t\treturn <div class=\"stretched center\">\n\t\t\t<label class=\"horizontal spacingRight\">\n\t\t\t\t<small>{Lang.get(\"label_leftChoice\")}</small>\n\t\t\t\t<input class=\"big\" type=\"url\" { ... BindObservable(this.input.leftSideLabel) }/>\n\t\t\t\t{ObservableLangChooser(this.study)}\n\t\t\t</label>\n\t\t\t<label class=\"horizontal\">\n\t\t\t\t<small>{Lang.get(\"label_rightChoice\")}</small>\n\t\t\t\t<input class=\"big\" type=\"url\" { ... BindObservable(this.input.rightSideLabel) }/>\n\t\t\t\t{ObservableLangChooser(this.study)}\n\t\t\t</label>\n\t\t</div>\n\t}\n\tprivate itemsOption(): Vnode<any, any> {\n\t\tconst removeChoice = (index: number) => {\n\t\t\tthis.input.listChoices.remove(index)\n\t\t}\n\t\tconst addItem = () => {\n\t\t\tlet name = prompt()\n\t\t\tif(!name)\n\t\t\t\treturn\n\t\t\tthis.input.listChoices.push(name)\n\t\t}\n\t\t\n\t\treturn <div>\n\t\t\t<h2>{Lang.getWithColon(\"choices\")}</h2>{\n\t\t\tDragContainer((dragTools) => {\n\t\t\t\treturn <div class=\"listParent\">\n\t\t\t\t\t<div class=\"listChild\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.input.listChoices.get().map((choiceObs, index) => {\n\t\t\t\t\t\t\t\treturn dragTools.getDragTarget(index, this.input.listChoices,\n\t\t\t\t\t\t\t\t\t<div class=\"vertical\">\n\t\t\t\t\t\t\t\t\t\t{dragTools.getDragStarter(index, this.input.listChoices)}\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" {...BindObservable(choiceObs)}/>\n\t\t\t\t\t\t\t\t\t\t{BtnTrash(removeChoice.bind(this, index))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div class=\"spacingTop center\">\n\t\t\t\t\t\t\t{BtnAdd(addItem.bind(this), Lang.get(\"add\"))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t})\n\t\t}</div>\n\t}\n\n\tprivate otherOption(): Vnode<any, any> {\n\t\treturn this.checkedOptionElement(this.input.other, Lang.get(\"option_other\"))\n\t}\n\t\n\t\n\tprivate getEntry(): InputEntry {\n\t\treturn this.inputTypes[this.input.responseType.get()]\n\t}\n\t\n\tpublic getView(): Vnode<any, any> | null {\n\t\tconst views = this.getEntry().view()\n\t\t\n\t\treturn DashRow(\n\t\t\tDashElement(\"stretched\",\n\t\t\t\t{\n\t\t\t\t\tcontent:\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"fakeLabel line\">\n\t\t\t\t\t\t\t\t<small>{Lang.get(\"text_shown_to_participant\")}</small>\n\t\t\t\t\t\t\t\t{RichText(this.input.text)}\n\t\t\t\t\t\t\t\t{ObservableLangChooser(this.study)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t}),\n\t\t\t...views.map((view) => {\n\t\t\t\treturn DashElement(\"stretched\", {content: view})\n\t\t\t}),\n\t\t\tDashElement(\"stretched\",\n\t\t\t\t{\n\t\t\t\t\tcontent:\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"fakeLabel line\">\n\t\t\t\t\t\t\t\t<small>{Lang.get(\"text_script\")}{NotCompatibleIcon(\"Web\")}</small>\n\t\t\t\t\t\t\t\t{ CodeEditor(this.input.textScript) }\n\t\t\t\t\t\t\t\t<small>{Lang.get(\"text_script_explanation\")}</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"fakeLabel line\">\n\t\t\t\t\t\t\t<small>{Lang.get(\"input_relevance\")}{NotCompatibleIcon(\"Web\")}</small>\n\t\t\t\t\t\t\t{ CodeEditor(this.input.relevance) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t}\n\tpublic createTypesView(\n\t\tcategoryView: (title: string, inputViews: Vnode<any, any>[]) => Vnode<any, any>,\n\t\tinputView: (title: InputEntry, isActive: boolean, onclick: () => void) => Vnode<any, any> | null\n\t): Vnode<any, any>[] {\n\t\tconst categoryViews: Record<string, Vnode<any, any>[]> = {}\n\t\t\n\t\tconst selectedType = this.input.responseType.get()\n\t\tfor(const key of this.sortedInputTypeKeys) {\n\t\t\tconst entry = this.inputTypes[key];\n\t\t\tif(!categoryViews.hasOwnProperty(entry.category))\n\t\t\t\tcategoryViews[entry.category] = []\n\t\t\t\n\t\t\tconst view = inputView(entry, key == selectedType,  () => { this.input.responseType.set(key) })\n\t\t\tif(view)\n\t\t\t\tcategoryViews[entry.category].push(view)\n\t\t}\n\t\t\n\t\t\n\t\tconst output = []\n\t\tfor(let key in InputCategories) {\n\t\t\tif(categoryViews[key].length)\n\t\t\t\toutput.push(categoryView(InputCategories[key as keyof typeof InputCategories], categoryViews[key]))\n\t\t}\n\t\treturn output\n\t}\n}","import {SectionAlternative, SectionContent} from \"../site/SectionContent\";\nimport m, {Vnode} from \"mithril\";\nimport {Lang} from \"../singletons/Lang\";\nimport {Study} from \"../data/study/Study\";\nimport {BindObservable, OnBeforeChangeTransformer} from \"../widgets/BindObservable\";\nimport {TitleRow} from \"../widgets/TitleRow\";\nimport {Input} from \"../data/study/Input\";\nimport {createUniqueName} from \"../helpers/UniqueName\";\nimport {DashRow} from \"../widgets/DashRow\";\nimport {InputOptionDesigner} from \"../helpers/InputOptionDesigner\";\nimport {DashElement} from \"../widgets/DashElement\";\nimport {Section} from \"../site/Section\";\nimport {SearchWidget} from \"../widgets/SearchWidget\";\nimport {NotCompatibleIcon} from \"../widgets/NotCompatibleIcon\";\nimport {BtnCustom} from \"../widgets/BtnWidgets\";\nimport questionSvg from \"../../imgs/icons/question.svg?raw\"\n\ntype IndexContainer = { qIndex: number, pIndex: number, iIndex: number } | null\n\nexport class Content extends SectionContent {\n\tprivate indexContainer: IndexContainer = null\n\t\n\tpublic static preLoad(section: Section): Promise<any>[] {\n\t\treturn [section.getStudyPromise()]\n\t}\n\t\n\tpublic title(): string {\n\t\tconst inputName = this.getStaticString(\"input\")\n\t\treturn inputName ? atob(inputName) : \"Error\"\n\t}\n\t\n\t\n\tpublic hasAlternatives(): boolean {\n\t\treturn this.getStaticInt(\"subInput\") == null\n\t}\n\tpublic getAlternatives(): SectionAlternative[] | null {\n\t\tconst study = this.getStudyOrThrow()\n\t\tconst alternatives: SectionAlternative[] = []\n\t\tconst depth = this.section.depth - 1\n\t\tconst inputName = atob(this.getStaticString(\"input\") ?? \"\")\n\t\t\n\t\tstudy.questionnaires.get().forEach((questionnaire) => {\n\t\t\talternatives.push({\n\t\t\t\ttitle: questionnaire.getTitle(),\n\t\t\t\theader: true,\n\t\t\t\ttarget: false\n\t\t\t})\n\t\t\tquestionnaire.pages.get().forEach((page, index) => {\n\t\t\t\tif(index != 0) {\n\t\t\t\t\talternatives.push({\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\theader: true,\n\t\t\t\t\t\ttarget: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tpage.inputs.get().forEach((input) => {\n\t\t\t\t\talternatives.push({\n\t\t\t\t\t\ttitle: input.name.get(),\n\t\t\t\t\t\ttarget: input.name.get() == inputName ? false : this.getUrl(`inputEdit,input:${btoa(input.name.get())}`, depth)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t\t\n\t\treturn alternatives\n\t}\n\t\n\tprivate getInputIndices(study: Study, inputName: string): IndexContainer {\n\t\tlet pIndex = -1\n\t\tlet iIndex = -1\n\t\tconst qIndex = study.questionnaires.get().findIndex((questionnaire) => {\n\t\t\tpIndex = questionnaire.pages.get().findIndex((page) => {\n\t\t\t\tiIndex = page.inputs.get().findIndex((input) => {\n\t\t\t\t\treturn input.name.get() == inputName\n\t\t\t\t})\n\t\t\t\treturn iIndex != -1\n\t\t\t})\n\t\t\treturn pIndex != -1\n\t\t})\n\n\t\treturn qIndex == -1 ? null : { qIndex: qIndex, pIndex: pIndex, iIndex: iIndex }\n\t}\n\n\tprivate getInputFromIndices(study: Study): Input | null {\n\t\treturn this.indexContainer && study.questionnaires.get()[this.indexContainer.qIndex]?.pages.get()[this.indexContainer.pIndex]?.inputs.get()[this.indexContainer.iIndex]\n\t}\n\n\tprivate getInput(study: Study, inputName: string): Input | null {\n\t\tconst input = this.getInputFromIndices(study)\n\t\tif(input) {\n\t\t\tif(input.name.get() != inputName)\n\t\t\t\tthis.newSection(`inputEdit,input:${btoa(input.name.get())}`, this.section.depth-1)\n\t\t\treturn input\n\t\t}\n\t\t\n\t\tthis.indexContainer = this.getInputIndices(study, inputName)\n\t\treturn this.getInputFromIndices(study)\n\t}\n\n\tpublic getView(): Vnode<any, any> {\n\t\tconst study = this.getStudyOrThrow()\n\t\tlet input = this.getInput(study, atob(this.getStaticString(\"input\") ?? \"\"))\n\t\tif(!input)\n\t\t\tthrow new Error(`Input ${atob(this.getStaticString(\"input\") ?? \"\")} does not exist`)\n\t\tconst subItemI = this.getStaticInt(\"subInput\")\n\t\tif(subItemI != null) {\n\t\t\tinput = input.subInputs.get()[subItemI]\n\t\t\tif(!input)\n\t\t\t\tthrow new Error(`SubItem ${subItemI} in Input ${atob(this.getStaticString(\"input\") ?? \"\")} does not exist`)\n\t\t}\n\t\t\n\t\tconst inputDesigner = new InputOptionDesigner(study, input, this.getUrl.bind(this), this.newSection.bind(this))\n\n\t\treturn <div>\n\t\t\t{subItemI == null &&\n\t\t\t\t<div class=\"center\">\n\t\t\t\t\t<label class=\"horizontal\">\n\t\t\t\t\t\t<small>{Lang.get(\"variable_name\")}</small>\n\t\t\t\t\t\t<input type=\"text\" {... BindObservable(input.name, new OnBeforeChangeTransformer<string>((before, after) => {\n\t\t\t\t\t\t\treturn createUniqueName(study, after) ?? before\n\t\t\t\t\t\t}))}/>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t{TitleRow(Lang.getWithColon(\"type\"))}\n\t\t\t{SearchWidget((tools) =>\n\t\t\t\t<div class=\"inputSelector\">\n\t\t\t\t\t<input placeholder={Lang.get(\"search\")} class=\"search small vertical\" type=\"text\" onkeyup={tools.updateSearchFromEvent.bind(tools)}/>\n\t\t\t\t\t<div class=\"scrollBox noBorder\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinputDesigner.createTypesView(\n\t\t\t\t\t\t\t\t(title, inputViews)=> {\n\t\t\t\t\t\t\t\t\treturn <div>\n\t\t\t\t\t\t\t\t\t\t<h2 class=\"center\">{title}</h2>\n\t\t\t\t\t\t\t\t\t\t{DashRow(...inputViews)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t(entry, isActive, onclick) => {\n\t\t\t\t\t\t\t\t\treturn tools.searchView(\n\t\t\t\t\t\t\t\t\t\tentry.title,\n\t\t\t\t\t\t\t\t\t\tDashElement(\"cramped\", {\n\t\t\t\t\t\t\t\t\t\t\tsmall: true,\n\t\t\t\t\t\t\t\t\t\t\thighlight: isActive,\n\t\t\t\t\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"smallText\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"flexGrow\">{entry.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{entry.notCompatible && NotCompatibleIcon(... entry.notCompatible)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{<a href={entry.helpUrl} target=\"_blank\">{BtnCustom(m.trust(questionSvg), (e) => {e.stopPropagation()})}</a>}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>,\n\t\t\t\t\t\t\t\t\t\t\tonclick: onclick\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t\n\t\t\t{TitleRow(Lang.getWithColon(\"settings\"))}\n\t\t\t{inputDesigner.getView()}\n\t\t</div>\n\t}\n}","import m, {Vnode} from \"mithril\"\nimport {Lang} from \"../singletons/Lang\";\nimport addSvg from \"../../imgs/icons/addCircle.svg?raw\";\nimport changeSvg from \"../../imgs/icons/change.svg?raw\";\nimport copySvg from \"../../imgs/icons/copy.svg?raw\";\nimport editSvg from \"../../imgs/icons/edit.svg?raw\";\nimport okSvg from \"../../imgs/icons/ok.svg?raw\";\nimport reloadSvg from \"../../imgs/icons/reload.svg?raw\";\nimport removeSvg from \"../../imgs/icons/remove.svg?raw\";\nimport transferSvg from \"../../imgs/icons/transfer.svg?raw\";\nimport trashSvg from \"../../imgs/icons/trash.svg?raw\";\n\nexport function BtnCustom(\n\ticon: Vnode<any, any>,\n\tonclick?: (e: MouseEvent) => void,\n\ttitle: string = \"\",\n\thoverTitle: string = \"\"\n): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn clickable\" onclick={onclick} title={title || hoverTitle}>\n\t\t\t{icon}\n\t\t\t<span class=\"middle smallText\">{title}</span>\n\t\t</div>\n\t)\n}\nexport function BtnRemove(onclick: () => void, title: string = \"\",): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn btnDelete clickable\" onclick={onclick} title={title || Lang.get(\"delete\")}>\n\t\t\t{m.trust(removeSvg)}\n\t\t\t<span class=\"smallText highlight middle\">{title}</span>\n\t\t</div>\n\t)\n}\nexport function BtnTrash(onclick: () => void, title: string = \"\",): Vnode<any, any> {\n\treturn (\n\t\t<div class=\"btn btnDelete clickable\" onclick={onclick} title={title || Lang.get(\"delete\")}>\n\t\t\t{m.trust(trashSvg)}\n\t\t\t<span class=\"highlight middle\">{title}</span>\n\t\t</div>\n\t)\n}\n\n\nexport function BtnAdd(onclick?: (e: MouseEvent) => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(addSvg), onclick, title, Lang.get(\"add\"))\n}\n\nexport function BtnCopy(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(copySvg), onclick, title, Lang.get(\"copy\"))\n}\n\nexport function BtnEdit(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(editSvg), onclick, title, Lang.get(\"change\"))\n}\n\nexport function BtnChange(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(changeSvg), onclick, title, Lang.get(\"change\"))\n}\n\nexport function BtnOk(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(okSvg), onclick, title, Lang.get(\"save\"))\n}\n\nexport function BtnReload(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(reloadSvg), onclick, title, Lang.get(\"reload\"))\n}\n\nexport function BtnTransfer(onclick?: () => void, title: string = \"\"): Vnode<any, any> {\n\treturn BtnCustom(m.trust(transferSvg), onclick, title, Lang.get(\"transfer\"))\n\t\n}\n","import m, {Component, Vnode, VnodeDOM} from \"mithril\"\nimport addSvg from \"../../imgs/icons/dragHandle.svg?raw\"\nimport {BaseObservable} from \"../observable/BaseObservable\";\nimport {ArrayInterface} from \"../observable/interfaces/ArrayInterface\";\n\nexport interface DragTools {\n\tgetDragTarget(index: number, targetList: ArrayType, content?: Vnode<any, any>): Vnode<any, any>\n\tgetDragStarter(index: number, dragTarget: ArrayType): Vnode<any, any>\n}\n\ntype ArrayType = ArrayInterface<any, BaseObservable<any>>\n\ninterface DragContainerImpOptions {\n\tcontent: (container: DragTools) => Vnode<any, any>\n}\nclass DragContainerImp implements DragTools, Component<DragContainerImpOptions, any> {\n\tprivate contentVNode?: VnodeDOM<any, any>\n\tprivate currentStartList?: ArrayType\n\tprivate currentTargetList?: ArrayType\n\tprivate currentStartIndex: number = 0\n\tprivate currentTargetIndex: number = 0\n\tprivate currentDragClone?: HTMLElement\n\tprivate currentStartElement?: HTMLElement\n\tprivate startIndex: number = 0\n\t\n\tpublic getDragTarget(index: number, targetList: ArrayType, content: Vnode<any, any> = <div></div>): Vnode<any, any> {\n\t\tcontent.attrs[\"className\"] = `dragTarget ${content.attrs[\"className\"] ?? \"\"}`\n\t\tcontent.attrs[\"ondragend\"] = this.ondragend.bind(this)\n\t\tcontent.attrs[\"ondragenter\"] = this.ondragenter.bind(this, index, targetList)\n\t\treturn content\n\t}\n\t\n\tpublic getDragStarter(index: number, targetList: ArrayType): Vnode<any, any> {\n\t\treturn <div class=\"btn clickable dragStarter\" draggable=\"true\" ondragstart={this.ondragstart.bind(this, index, targetList)}>\n\t\t\t{m.trust(addSvg)}\n\t\t</div>\n\t}\n\t\n\t\n\tprivate getIndexInContainer(searchEl: HTMLElement): number {\n\t\tconst htmlCollection = this.contentVNode?.dom.getElementsByClassName(\"dragTarget\")\n\t\tif(htmlCollection) {\n\t\t\tfor(let i = htmlCollection.length - 1; i >= 0; --i) {\n\t\t\t\tif(htmlCollection[i] === searchEl)\n\t\t\t\t\treturn i\n\t\t\t}\n\t\t}\n\t\treturn -1\n\t}\n\t\n\tprivate addDragSpacer(locationEl: HTMLElement): void {\n\t\tlet insertBefore: Element | null = locationEl //when insertBefore is null, currentDragClone will be placed at the end\n\t\tif(!this.currentDragClone)\n\t\t\treturn\n\t\tif(this.currentDragClone.parentNode) {\n\t\t\tconst locationIndex = this.getIndexInContainer(locationEl)\n\t\t\tconst spacerIndex = this.getIndexInContainer(this.currentDragClone)\n\t\t\t\n\t\t\tif(spacerIndex < this.startIndex) { //mouse moved up (/right) from starting point\n\t\t\t\tif(spacerIndex < locationIndex) { //mouse is moving down (/left) again\n\t\t\t\t\tinsertBefore = locationEl.nextElementSibling\n\t\t\t\t\t++this.currentTargetIndex\n\t\t\t\t}\n\t\t\t}\n\t\t\telse { //mouse moved down (/left) from starting point\n\t\t\t\t\n\t\t\t\t//we need to add one to targetIndex.\n\t\t\t\t// But when we are in the same list, removing the item (before moving it) means that targetIndex points to the element afterwards anyway.\n\t\t\t\t// But when we are in another list, we need to correct manually:\n\t\t\t\tif(this.currentStartList != this.currentTargetList)\n\t\t\t\t\t++this.currentTargetIndex\n\t\t\t\t\n\t\t\t\tif(spacerIndex > locationIndex) //mouse is moving up (/right) again\n\t\t\t\t\t--this.currentTargetIndex\n\t\t\t\telse\n\t\t\t\t\tinsertBefore = locationEl.nextElementSibling\n\t\t\t}\n\t\t\tthis.currentDragClone.parentNode.removeChild(this.currentDragClone)\n\t\t}\n\t\tlocationEl.parentNode?.insertBefore(this.currentDragClone, insertBefore)\n\t}\n\t\n\tprivate ondragstart(index: number, targetList: ArrayType, e: DragEvent): boolean {\n\t\tlet targetElement = e.currentTarget as HTMLElement\n\t\twhile(targetElement && !targetElement.classList.contains(\"dragTarget\")) {\n\t\t\ttargetElement = targetElement.parentNode as HTMLElement\n\t\t}\n\t\tconst dragRoot = this.contentVNode?.dom\n\t\tif(!dragRoot)\n\t\t\treturn false\n\t\t\n\t\t\n\t\tthis.startIndex = this.getIndexInContainer(targetElement)\n\t\t\n\t\tthis.currentStartList = targetList\n\t\tthis.currentStartIndex = index\n\t\t\n\t\tthis.currentDragClone = targetElement.cloneNode(true) as HTMLElement\n\t\tthis.currentDragClone?.classList.add(\"drag_spacer\")\n\t\t\n\t\tthis.currentDragClone?.addEventListener(\"dragover\", this.ondragover.bind(this))\n\t\tthis.currentDragClone?.addEventListener(\"dragleave\", this.ondragleave.bind(this))\n\t\tthis.currentDragClone?.addEventListener(\"drop\", this.ondrop.bind(this))\n\t\t\n\t\ttargetElement.classList.add(\"dragStarted\")\n\t\te.dataTransfer?.setDragImage(targetElement, 0, 0)\n\t\t\n\t\t\n\t\tthis.currentStartElement = targetElement\n\t\t\n\t\twindow.setTimeout( () => {\n\t\t\t//in firefox: setDragImage() seems to stop working when the class of document.body is changed\n\t\t\t//in chrome: DOM changes seem to cancel dragging altogether\n\t\t\t//solution: doing this stuff in a different \"thread\" seems to do the trick\n\t\t\tthis.addDragSpacer(targetElement)\n\t\t\tdragRoot.classList.add(\"is_dragging\")\n\t\t}, 0)\n\t\treturn true\n\t}\n\tprivate ondragend(e: DragEvent): void {\n\t\tthis.ondragleave(e)\n\t\te.preventDefault()\n\t\t\n\t\tthis.contentVNode?.dom.classList.remove(\"is_dragging\")\n\t\tthis.currentStartElement?.classList.remove(\"dragStarted\")\n\t\tif(this.currentDragClone?.parentNode)\n\t\t\tthis.currentDragClone.parentNode.removeChild(this.currentDragClone)\n\t\t\n\t\tthis.currentDragClone = undefined\n\t}\n\tprivate ondragenter(index: number, targetList: ArrayType, e: DragEvent): false {\n\t\tconst targetElement = e.currentTarget as HTMLElement\n\t\tif(!this.contentVNode?.dom.contains(targetElement))\n\t\t\treturn false\n\t\t\n\t\tif(e.dataTransfer)\n\t\t\te.dataTransfer.dropEffect = \"none\"\n\t\te.preventDefault()\n\t\t\n\t\tthis.currentTargetList = targetList\n\t\tthis.currentTargetIndex = index\n\t\t\n\t\tthis.addDragSpacer(targetElement)\n\t\treturn false\n\t}\n\t\n\tprivate ondragover(e: DragEvent): void {\n\t\te.preventDefault()\n\t\tif(e.dataTransfer)\n\t\t\te.dataTransfer.dropEffect = \"move\"\n\t}\n\tprivate ondragleave(e: DragEvent): void {\n\t\te.preventDefault()\n\t}\n\tprivate ondrop(e: DragEvent): void {\n\t\te.preventDefault()\n\t\t\n\t\tif(this.currentStartList == null || this.currentTargetList == null)\n\t\t\treturn\n\t\t\n\t\tif(this.currentTargetList == this.currentStartList)\n\t\t\tthis.currentTargetList.move(this.currentStartIndex, this.currentTargetIndex)\n\t\telse\n\t\t\tthis.currentTargetList.moveFromOtherList(this.currentStartList, this.currentStartIndex, this.currentTargetIndex)\n\t\t\n\t\tthis.currentStartList = this.currentTargetList = undefined\n\t\tthis.ondragend(e)\n\t}\n\t\n\tpublic onupdate(vNode: VnodeDOM<DragContainerImpOptions, any>): void {\n\t\tthis.contentVNode = vNode\n\t}\n\t\n\tpublic view(vNode: Vnode<DragContainerImpOptions, any>): Vnode<any, any> {\n\t\treturn vNode.attrs.content(this)\n\t}\n}\n\n\nexport function DragContainer(\n\tcontent: (container: DragTools) => Vnode<any, any>\n): Vnode<any, any> {\n\treturn m(DragContainerImp, { content: content })\n}","import m, {Component, Vnode} from \"mithril\"\n\nexport interface SearchTools {\n\tsearchView(key: string, content: Vnode<any, any>): Vnode<any, any> | null\n\tupdateSearchFromEvent(e: InputEvent): void\n\tupdateSearch(s: string): void\n}\ninterface SearchBarComponentOptions {\n\tcontent: (tools: SearchTools) => Vnode<any, any>\n\tclassName?: string //in case the parent has added a className that we need to include\n}\nclass SearchBarComponent implements SearchTools, Component<SearchBarComponentOptions, any> {\n\tprivate currentSearchValue: string = \"\"\n\t\n\tpublic updateSearch(s: string): void {\n\t\tthis.currentSearchValue = s\n\t}\n\tpublic updateSearchFromEvent(e: InputEvent): void {\n\t\tthis.updateSearch((e.target as HTMLInputElement).value)\n\t}\n\tpublic searchView(key: string, content: Vnode<any, any>): Vnode<any, any> | null {\n\t\treturn key.search(this.currentSearchValue) != -1 ? content : null\n\t}\n\t\n\tpublic view(vNode: Vnode<SearchBarComponentOptions, any>): Vnode<any, any> {\n\t\tconst view = vNode.attrs.content(this)\n\t\tview.attrs.className = `${vNode.attrs.className ?? \"\"} ${view.attrs.className ?? \"\"}`\n\t\treturn view\n\t}\n}\n\nexport function SearchWidget(content: (tools: SearchTools) => Vnode<any, any>): Vnode<any, any> {\n\treturn m(SearchBarComponent, { content: content })\n}","import m, {Vnode} from \"mithril\"\nexport function TitleRow(\n\ttitle: string | Vnode<any, any>\n): Vnode<any, any> {\n\tif(typeof title == \"string\") {\n\t\treturn <div class=\"titleRow\">\n\t\t\t<span class=\"title\">{title}</span>\n\t\t</div>\n\t}\n\telse {\n\t\ttitle.attrs[\"className\"] = `titleRow ${title.attrs[\"className\"] ?? \"\"}`\n\t\treturn title\n\t}\n}"],"names":["InputCategories","Lang","get","study","input","getUrl","goTo","inputTypes","title","helpUrl","category","notCompatible","view","requiredOption","class","type","BindObservable","packageId","defaultValueOption","leftRightLabelOption","onlyRequiredAndDefaultOptions","showValueOption","checkedOptionElement","numberHasDecimal","timeoutSec","playSound","removeSubInput","index","subInputs","remove","addSubInput","push","random","getWithColon","DragContainer","dragTools","map","subInput","getDragTarget","getDragStarter","bind","href","getDynamic","responseType","required","urlOption","inputOptionElement","likertSteps","vertical","otherOption","itemsOption","asDropDown","forceInt","resolution","quality","defaultValue","maxValue","this","inputTypeKeys","Object","keys","sort","a","b","titleA","titleB","sortedInputTypeKeys","obs","className","ObservableLangChooser","url","showValue","disabled","leftSideLabel","rightSideLabel","removeChoice","listChoices","addItem","name","prompt","choiceObs","other","getEntry","getView","views","DashRow","DashElement","content","RichText","text","NotCompatibleIcon","CodeEditor","textScript","relevance","createTypesView","categoryView","inputView","categoryViews","selectedType","key","entry","hasOwnProperty","set","output","length","indexContainer","preLoad","section","getStudyPromise","inputName","getStaticString","atob","hasAlternatives","getStaticInt","getAlternatives","getStudyOrThrow","alternatives","depth","questionnaires","forEach","questionnaire","getTitle","header","target","pages","page","inputs","btoa","getInputIndices","pIndex","iIndex","qIndex","findIndex","getInputFromIndices","getInput","newSection","Error","subItemI","inputDesigner","InputOptionDesigner","before","after","TitleRow","SearchWidget","tools","placeholder","onkeyup","updateSearchFromEvent","inputViews","isActive","onclick","searchView","small","highlight","e","stopPropagation","SectionContent","BtnCustom","icon","hoverTitle","BtnRemove","BtnTrash","BtnAdd","BtnCopy","BtnEdit","BtnOk","BtnReload","BtnTransfer","currentStartIndex","currentTargetIndex","startIndex","targetList","attrs","ondragend","ondragenter","draggable","ondragstart","getIndexInContainer","searchEl","htmlCollection","contentVNode","dom","getElementsByClassName","i","addDragSpacer","locationEl","insertBefore","currentDragClone","parentNode","locationIndex","spacerIndex","nextElementSibling","currentStartList","currentTargetList","removeChild","targetElement","currentTarget","classList","contains","dragRoot","cloneNode","add","addEventListener","ondragover","ondragleave","ondrop","dataTransfer","setDragImage","currentStartElement","window","setTimeout","preventDefault","undefined","dropEffect","move","moveFromOtherList","onupdate","vNode","DragContainerImp","currentSearchValue","updateSearch","s","value","search","SearchBarComponent"],"sourceRoot":""}