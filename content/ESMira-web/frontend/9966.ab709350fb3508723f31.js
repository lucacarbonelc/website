"use strict";(self.webpackChunkESMira=self.webpackChunkESMira||[]).push([[9966],{9966:(t,e,n)=>{n.r(e),n.d(e,{ChartEditSectionContent:()=>V,Content:()=>J});var i,a=n(7097),l=n(4862),r=n.n(l),s=n(9700),o=n(5929),c=n(5617),u=n(5823),d=n(6969),h=n(706),p=n(3326),g=["userId","uploaded","appType","appVersion","studyId","studyVersion","questionnaireName","eventType","timezone","responseTime","formDuration"],v=n(7079),f=n(1818),m=n(1883),b=n(9619),y=n(8879),x=n(6471),C=n(6784),T=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(){return w=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},w.apply(this,arguments)},V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e}(a.R),J=function(t){function e(e){var n=t.call(this,e)||this;return n.calcChart=null,n.isCalc="calc"==n.section.sectionValue,n}return T(e,t),e.preLoad=function(t){return[t.getStudyPromise()]},e.prototype.title=function(){return s.J.get("edit_chart")},e.prototype.titleExtra=function(){return r()("a",{href:this.getUrl("chartPreview")},(0,x.wj)(r().trust(C),void 0,s.J.get("calc"==this.section.sectionValue?"calculate":"preview")))},e.prototype.getChart=function(){var t,e,n=this.getStudyOrThrow();return this.isCalc?(this.calcChart||(this.calcChart=new h.h({},null,"chartCalc")),this.calcChart):"public"===this.section.sectionValue?n.publicStatistics.charts.get()[null!==(t=this.getStaticInt("chartI"))&&void 0!==t?t:0]:n.personalStatistics.charts.get()[null!==(e=this.getStaticInt("chartI"))&&void 0!==e?e:0]},e.prototype.copyAxisContainer=function(t,e,n){t.addCopy(e,n)},e.prototype.removeAxisContainer=function(t,e){t.remove(e)},e.prototype.removeCondition=function(t,e){t.conditions.remove(e)},e.prototype.addCondition=function(t,e){var n=e.target;t.conditions.push({key:n.value}),t.conditionType.get()==p.dR&&t.conditionType.set(p.LB),n.selectedIndex=0},e.prototype.addVariable=function(t,e){var n=f.Y.getStudyVariables(e),i=n.length?n[0]:"";t.push({xAxis:{variableName:i},yAxis:{variableName:i}})},e.prototype.getConditionVariables=function(t,e){if(""==e){var n=t.questionnaires.get()[0];return(l=f.Y.getQuestionnaireVariables(n)).concat(g)}for(var i=t.questionnaires.get(),a=i.length-1;a>=0;--a){var l;if(-1!=(l=f.Y.getQuestionnaireVariables(i[a])).indexOf(e))return l.concat(g)}return g},e.prototype.getView=function(){var t=this.getStudyOrThrow(),e=this.getChart();return r()("div",null,"calc"!=this.section.sectionValue&&r()("div",null,(0,d.d)(s.J.getWithColon("description")),(0,m.x)((0,y.B)("stretched",{content:r()("div",null,r()("label",{class:"noTitle noDesc"},r()("input",w({type:"checkbox"},(0,c.Xs)(e.hideUntilCompletion))),r()("span",{class:"smallText"},s.J.get("hideUntilCompletion"))))}),(0,y.B)("stretched",{content:r()("div",null,r()("label",{class:"line"},r()("small",null,s.J.getWithColon("title")),r()("input",w({class:"big",type:"text"},(0,c.Xs)(e.title))),!this.isCalc&&(0,o.B)(t)))}),(0,y.B)("stretched",{content:r()("div",null,r()("div",{class:"fakeLabel line"},r()("small",null,s.J.getWithColon("description")),(0,u.s)(e.chartDescription),!this.isCalc&&(0,o.B)(t)))}),e.chartType.get()!=p.Tu&&(0,y.B)(null,{content:r()("div",null,r()("label",{class:"horizontalPadding"},r()("small",null,s.J.getWithColon("xAxis_label")),r()("input",w({class:"big",type:"text"},(0,c.Xs)(e.xAxisLabel))),!this.isCalc&&(0,o.B)(t)))}),e.chartType.get()!=p.Tu&&(0,y.B)(null,{content:r()("div",null,r()("label",{class:"horizontalPadding"},r()("small",null,s.J.getWithColon("yAxis_label")),r()("input",w({class:"big",type:"text"},(0,c.Xs)(e.yAxisLabel))),!this.isCalc&&(0,o.B)(t)))}))),(0,d.d)(s.J.getWithColon("settings")),(0,m.x)((0,y.B)(null,{content:r()("div",null,r()("label",{class:"horizontal"},r()("small",null,s.J.get("statisticsChartType")),r()("select",w({},(0,c.Xs)(e.chartType)),r()("option",{value:"0"},s.J.get("statisticsChart_line")),r()("option",{value:"1"},s.J.get("statisticsChart_line_filled")),r()("option",{value:"2"},s.J.get("statisticsChart_bars")),r()("option",{value:"3"},s.J.get("statisticsChart_scatter")),r()("option",{value:"4"},s.J.get("statisticsChart_pie")))))}),(0,y.B)(null,{content:r()("div",null,r()("label",{class:"horizontal"},r()("small",null,s.J.get("statisticsDataType")),r()("select",w({},(0,c.Xs)(e.dataType)),r()("option",{value:"0"},s.J.get("statisticsDataType_daily")),r()("option",{value:"1"},s.J.get("statisticsDataType_frequencyDistr")),r()("option",{value:"2"},s.J.get("statisticsDataType_sum")),r()("option",{value:"3"},s.J.get("statisticsDataType_xy")))))}),(e.dataType.get()==p.IE||e.dataType.get()==p._G)&&(0,y.B)(null,{content:r()("div",null,r()("label",{class:"horizontal"},r()("small",null,s.J.get("statisticsValueType")),r()("select",w({},(0,c.Xs)(e.valueType)),r()("option",{value:"0"},s.J.get("statisticsValueType_mean")),r()("option",{value:"1"},s.J.get("statisticsValueType_sum")),r()("option",{value:"2"},s.J.get("statisticsValueType_count")))))}),e.dataType.get()==p.i1&&(0,y.B)(null,{content:r()("div",null,r()("label",{class:"vertical noTitle noDesc nowrap"},r()("input",w({type:"checkbox"},(0,c.Xs)(e.inPercent))),r()("span",{class:"smallText"},s.J.get("values_in_percent"))),r()("label",{class:"vertical noTitle noDesc nowrap"},r()("input",w({type:"checkbox"},(0,c.Xs)(e.xAxisIsNumberRange))),r()("span",{class:"smallText"},s.J.get("xAxisIsNumberRange_label"))))}),e.chartType.get()==p.NP&&(0,y.B)(null,{content:r()("div",null,r()("label",{class:"noDesc"},r()("span",null,s.J.getWithColon("fitToShowLinearProgression_label")),r()("input",w({type:"number"},(0,c.Xs)(e.fitToShowLinearProgression)))))}),(0,y.B)(null,{content:r()("div",null,r()("label",null,r()("small",null,s.J.get("chart_max_yValue")),r()("input",w({type:"number"},(0,c.Xs)(e.maxYValue))),r()("small",null,s.J.get("chart_max_yValue_explainZero"))))}),"personal"==this.section.sectionValue&&e.chartType.get()!=p.Tu&&(0,y.B)(null,{content:r()("div",null,r()("label",null,r()("input",w({class:"horizontal",type:"checkbox"},(0,c.Xs)(e.displayPublicVariable))),r()("span",{class:"horizontal smallText"},s.J.get("display_additional_publicVariable"))))})),e.displayPublicVariable.get()&&r()("div",null,(0,d.d)(s.J.getWithColon("public_variables")),this.getVariablesView(t,e,e.publicVariables),r()("div",{class:"center"},(0,x.Wz)(this.addVariable.bind(this,e.publicVariables,t),s.J.get("add")))),(0,d.d)(s.J.getWithColon("variables")),this.getVariablesView(t,e,e.axisContainer),r()("br",null),r()("div",{class:"center"},(0,x.Wz)(this.addVariable.bind(this,e.axisContainer,t),s.J.get("add"))))},e.prototype.getVariablesView=function(t,e,n){var i=this,a=f.Y.getStudyVariables(t);return(0,v.y)((function(l){return m.x.apply(void 0,n.get().map((function(o,u){return l.getDragTarget(u,n,(0,y.B)("stretched",{content:r()("div",null,r()("div",{class:"line flexHorizontal"},r()("div",{class:"flexCenter"},l.getDragStarter(u,n)),r()("div",{class:"flexGrow"},r()("div",{class:"flexHorizontal"},r()("label",{class:"horizontal"},r()("small",null,s.J.get("label")),r()("input",w({type:"text"},(0,c.Xs)(o.label)))),r()("label",{class:"horizontal"},r()("small",null,s.J.get("color")),r()("input",w({type:"color"},(0,c.Xs)(o.color)))),r()("div",{class:"flexGrow"}),r()("div",null,(0,x.Qu)(i.copyAxisContainer.bind(i,n,o,u))),r()("div",null,(0,x.Pq)(i.removeAxisContainer.bind(i,n,u)))),e.dataType.get()==p.e1&&i.getAxisView(t,s.J.get("axis_x"),o.xAxis,a),i.getAxisView(t,s.J.get("axis_y"),o.yAxis,a))))}))})))}))},e.prototype.getAxisView=function(t,e,n,i){var a=this,l=this.getConditionVariables(t,n.variableName.get());return r()("div",null,r()("div",{class:"vertical"},r()("label",{class:"horizontal spacingRight"},r()("small",null,e),r()("select",w({},(0,c.Xs)(n.variableName)),i.map((function(t){return r()("option",null,t)})))),r()("label",{class:"horizontal spacingLeft"},r()("small",null,s.J.get("condition")),r()("select",{class:"smallText",onchange:this.addCondition.bind(this,n)},r()("option",null,s.J.get("select_to_add")),l.map((function(t){return r()("option",null,t)}))))),r()("table",null,n.conditions.get().map((function(t,e){return t.key.get()&&r()("tr",null,r()("td",{class:"center"},0==e?r()("div",{style:"width:75px"}):(0,b.rI)("conditionType",r()("span",{class:"clickable"},n.conditionType.get()==p.LB?"AND":"OR"),(function(t){return r()("div",null,r()("div",{class:"clickable",onclick:function(){n.conditionType.set(p.LB),t()}},s.J.get("conditionTypeAnd")),r()("div",{class:"clickable spacingTop",onclick:function(){n.conditionType.set(p.vv),t()}},s.J.get("conditionTypeOr")))}))),r()("td",null,r()("label",{class:"horizontal middle"},r()("small",null,s.J.get("variable")),r()("select",w({},(0,c.Xs)(t.key)),l.map((function(t){return r()("option",null,t)}))))),r()("td",null,r()("label",{class:"horizontal middle"},r()("small",null,s.J.get("operator")),r()("select",w({class:"small"},(0,c.Xs)(t.operator)),r()("option",{value:"0"},"="),r()("option",{value:"1"},"≠"),r()("option",{value:"2"},"⋝"),r()("option",{value:"3"},"⋜")))),r()("td",null,r()("label",{class:"horizontal"},r()("small",null,s.J.get("value")),r()("input",w({class:"small",type:"text"},(0,c.Xs)(t.value))))),r()("td",null,(0,x.bi)(a.removeCondition.bind(a,n,e))))}))))},e}(V)},8879:(t,e,n)=>{n.d(e,{B:()=>o});var i=n(4862),a=n.n(i),l=n(2202);function r(t){var e,n="dashEl";return t.floatingRight?n+=" floating right":t.floating&&(n+=" floating"),t.small&&(n+=" small"),t.highlight&&(n+=" highlight"),t.disabled&&(n+=" disabled"),e=t.content?t.content:t.template?function(t){return a()("div",null,(t.icon||t.noCompatibilityIcon)&&a()("div",{class:"dashIcon"},t.icon,t.noCompatibilityIcon&&l.z.apply(void 0,t.noCompatibilityIcon)),a()("div",{class:"dashTitle"},t.title),t.msg&&a()("p",{class:"dashMsg"},t.msg),t.innerLinkTitle&&t.innerLinkHref&&a()("a",{class:"link",href:t.innerLinkHref},t.innerLinkTitle))}(t.template):a()("div",{class:"highlight"},"Missing Dash Information"),t.href?a()("a",{target:t.href.startsWith("http")?"_blank":"",class:"".concat(n," dashLink"),href:t.href},e):t.onclick?a()("a",{class:"".concat(n," dashLink"),onclick:t.onclick},e):t.showAsClickable?a()("a",{class:"".concat(n," dashLink")},e):(e.attrs.className="".concat(n," ").concat(e.attrs.hasOwnProperty("className")?e.attrs.className:""),e)}function s(t,e){return t&&(e+=" "+t),e}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(1==e.length){if(!e[0])return a()("div",null);var i=r(e[0]);return i.attrs.className=s(t,i.attrs.className),i}var l=s(t,"multipleChildren");return a()("div",{class:l},e.map((function(t){return t&&r(t)})))}},1883:(t,e,n)=>{n.d(e,{x:()=>l});var i=n(4862),a=n.n(i);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a()("div",{class:"dashRow"},t)}},7079:(t,e,n)=>{n.d(e,{y:()=>r});var i=n(4862),a=n.n(i),l=function(){function t(){this.currentStartIndex=0,this.currentTargetIndex=0,this.startIndex=0}return t.prototype.getDragTarget=function(t,e,n){var i;return void 0===n&&(n=a()("div",null)),n.attrs.className="dragTarget ".concat(null!==(i=n.attrs.className)&&void 0!==i?i:""),n.attrs.ondragend=this.ondragend.bind(this),n.attrs.ondragenter=this.ondragenter.bind(this,t,e),n},t.prototype.getDragStarter=function(t,e){return a()("div",{class:"btn clickable dragStarter",draggable:"true",ondragstart:this.ondragstart.bind(this,t,e)},a().trust('<svg class="middle" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>'))},t.prototype.getIndexInContainer=function(t){var e,n=null===(e=this.contentVNode)||void 0===e?void 0:e.dom.getElementsByClassName("dragTarget");if(n)for(var i=n.length-1;i>=0;--i)if(n[i]===t)return i;return-1},t.prototype.addDragSpacer=function(t){var e,n=t;if(this.currentDragClone){if(this.currentDragClone.parentNode){var i=this.getIndexInContainer(t),a=this.getIndexInContainer(this.currentDragClone);a<this.startIndex?a<i&&(n=t.nextElementSibling,++this.currentTargetIndex):(this.currentStartList!=this.currentTargetList&&++this.currentTargetIndex,a>i?--this.currentTargetIndex:n=t.nextElementSibling),this.currentDragClone.parentNode.removeChild(this.currentDragClone)}null===(e=t.parentNode)||void 0===e||e.insertBefore(this.currentDragClone,n)}},t.prototype.ondragstart=function(t,e,n){for(var i,a,l,r,s,o,c=this,u=n.currentTarget;u&&!u.classList.contains("dragTarget");)u=u.parentNode;var d=null===(i=this.contentVNode)||void 0===i?void 0:i.dom;return!!d&&(this.startIndex=this.getIndexInContainer(u),this.currentStartList=e,this.currentStartIndex=t,this.currentDragClone=u.cloneNode(!0),null===(a=this.currentDragClone)||void 0===a||a.classList.add("drag_spacer"),null===(l=this.currentDragClone)||void 0===l||l.addEventListener("dragover",this.ondragover.bind(this)),null===(r=this.currentDragClone)||void 0===r||r.addEventListener("dragleave",this.ondragleave.bind(this)),null===(s=this.currentDragClone)||void 0===s||s.addEventListener("drop",this.ondrop.bind(this)),u.classList.add("dragStarted"),null===(o=n.dataTransfer)||void 0===o||o.setDragImage(u,0,0),this.currentStartElement=u,window.setTimeout((function(){c.addDragSpacer(u),d.classList.add("is_dragging")}),0),!0)},t.prototype.ondragend=function(t){var e,n,i;this.ondragleave(t),t.preventDefault(),null===(e=this.contentVNode)||void 0===e||e.dom.classList.remove("is_dragging"),null===(n=this.currentStartElement)||void 0===n||n.classList.remove("dragStarted"),(null===(i=this.currentDragClone)||void 0===i?void 0:i.parentNode)&&this.currentDragClone.parentNode.removeChild(this.currentDragClone),this.currentDragClone=void 0},t.prototype.ondragenter=function(t,e,n){var i,a=n.currentTarget;return!!(null===(i=this.contentVNode)||void 0===i?void 0:i.dom.contains(a))&&(n.dataTransfer&&(n.dataTransfer.dropEffect="none"),n.preventDefault(),this.currentTargetList=e,this.currentTargetIndex=t,this.addDragSpacer(a),!1)},t.prototype.ondragover=function(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")},t.prototype.ondragleave=function(t){t.preventDefault()},t.prototype.ondrop=function(t){t.preventDefault(),null!=this.currentStartList&&null!=this.currentTargetList&&(this.currentTargetList==this.currentStartList?this.currentTargetList.move(this.currentStartIndex,this.currentTargetIndex):this.currentTargetList.moveFromOtherList(this.currentStartList,this.currentStartIndex,this.currentTargetIndex),this.currentStartList=this.currentTargetList=void 0,this.ondragend(t))},t.prototype.onupdate=function(t){this.contentVNode=t},t.prototype.view=function(t){return t.attrs.content(this)},t}();function r(t){return a()(l,{content:t})}},2202:(t,e,n)=>{n.d(e,{z:()=>d});var i=n(4862),a=n.n(i),l=n(9700),r=n(1844),s=n(9619),o={Android:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><g><path d="M0,0h24v24H0V0z" fill="none"/></g></g><g><g><path d="M17.6,9.48l1.84-3.18c0.16-0.31,0.04-0.69-0.26-0.85c-0.29-0.15-0.65-0.06-0.83,0.22l-1.88,3.24 c-2.86-1.21-6.08-1.21-8.94,0L5.65,5.67c-0.19-0.29-0.58-0.38-0.87-0.2C4.5,5.65,4.41,6.01,4.56,6.3L6.4,9.48 C3.3,11.25,1.28,14.44,1,18h22C22.72,14.44,20.7,11.25,17.6,9.48z M7,15.25c-0.69,0-1.25-0.56-1.25-1.25 c0-0.69,0.56-1.25,1.25-1.25S8.25,13.31,8.25,14C8.25,14.69,7.69,15.25,7,15.25z M17,15.25c-0.69,0-1.25-0.56-1.25-1.25 c0-0.69,0.56-1.25,1.25-1.25s1.25,0.56,1.25,1.25C18.25,14.69,17.69,15.25,17,15.25z"/></g></g></svg>',iOS:'<svg width="24" height="24" viewBox="0 0 170 170" xmlns="http://www.w3.org/2000/svg"><g><path d="m127.805969,90.003128c0.224838,24.213104 21.241287,32.270615 21.474121,32.373459c-0.177704,0.56826 -3.358078,11.482742 -11.072464,22.756622c-6.668747,9.746841 -13.590027,19.457977 -24.493088,19.659103c-10.713348,0.197403 -14.158287,-6.353043 -26.406677,-6.353043c-12.24469,0 -16.072174,6.151901 -26.213551,6.550446c-10.52422,0.398254 -18.538303,-10.539917 -25.26247,-20.251053c-13.740021,-19.864456 -24.24024,-56.132286 -10.1411,-80.613663c7.004152,-12.157551 19.521101,-19.85622 33.10713,-20.053638c10.334515,-0.197132 20.089069,6.952717 26.406689,6.952717c6.313614,0 18.167473,-8.59832 30.628998,-7.335548c5.21682,0.217129 19.860519,2.1073 29.263641,15.871029c-0.75766,0.469692 -17.472931,10.200527 -17.291229,30.443592m-20.134499,-59.456692c5.587379,-6.7633 9.348007,-16.178439 8.322067,-25.546439c-8.053787,0.32369 -17.792625,5.36682 -23.569427,12.126399c-5.177124,5.985922 -9.711121,15.566772 -8.48777,24.749359c8.976891,0.69453 18.147476,-4.561718 23.73513,-11.329308"/></g></svg>',Web:r};function c(t,e){(0,s.kp)("notCompatible",e.target,(function(){return a()("div",{class:"smallText center"},t)}))}function u(){(0,s.qX)("notCompatible")}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={Android:l.J.get("Android"),iOS:l.J.get("iOS"),Web:l.J.get("web_questionnaire")},i=l.J.get("not_compatible_with",t.map((function(t){return n[t]})).join(", "));return a()("div",{class:"notCompatibleIcon",onpointerenter:c.bind(null,i),onpointerleave:u.bind(null)},t.map((function(t){return a()("div",{class:"deviceIcon"},a().trust(o[t]))})))}},6969:(t,e,n)=>{n.d(e,{d:()=>l});var i=n(4862),a=n.n(i);function l(t){var e;return"string"==typeof t?a()("div",{class:"titleRow"},a()("span",{class:"title"},t)):(t.attrs.className="titleRow ".concat(null!==(e=t.attrs.className)&&void 0!==e?e:""),t)}},1844:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"/></svg>'},6784:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4zm2.5 2.1h-15V5h15v14.1zm0-16.1h-15c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>'}}]);
//# sourceMappingURL=9966.ab709350fb3508723f31.js.map