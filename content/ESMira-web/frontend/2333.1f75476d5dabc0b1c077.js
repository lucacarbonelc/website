"use strict";(self.webpackChunkESMira=self.webpackChunkESMira||[]).push([[2333,6471],{2333:(t,n,e)=>{e.r(n),e.d(n,{Content:()=>v});var o,i=e(8819),r=e(4862),s=e.n(r),l=e(9700),c=e(6002),a=e(7097),u=e(8202),h=e(6471),d=(o=function(t,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},o(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),g=function(t,n,e,o){return new(e||(e=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function l(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,l)}c((o=o.apply(t,n||[])).next())}))},p=function(t,n){var e,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(s=0)),s;)try{if(e=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,o=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(6===l[0]&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=n.call(t,s)}catch(t){l=[6,t],o=0}finally{e=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},v=function(t){function n(n,e){var o=t.call(this,n)||this;return o.readLogs=[],o.unreadLogs=[],o.sortMerlinLogs(e),o}return d(n,t),n.preLoad=function(t){var n;return[c.l.loadJson("".concat(i.Zv,"?type=ListMerlinLogs&study_id=").concat(null!==(n=t.getStaticInt("id"))&&void 0!==n?n:0))]},n.prototype.title=function(){return l.J.get("merlin_logs")},n.prototype.reloadMerlinLogs=function(){var t,n;return g(this,void 0,void 0,(function(){var e;return p(this,(function(o){switch(o.label){case 0:return[4,this.section.loader.loadJson("".concat(i.Zv,"?type=ListMerlinLogs&study_id=").concat(null!==(t=this.section.getStaticInt("id"))&&void 0!==t?t:0))];case 1:return e=o.sent(),this.sortMerlinLogs(e),this.getTools().merlinLogsLoader.setStudyNewLogsRemaining(null!==(n=this.section.getStaticInt("id"))&&void 0!==n?n:0,this.unreadLogs.length>0),[2]}}))}))},n.prototype.sortMerlinLogs=function(t){this.readLogs=[],this.unreadLogs=[];for(var n=0,e=t=t.sort((function(t,n){return n.timestamp-t.timestamp}));n<e.length;n++){var o=e[n];o.printName=this.getName(o),o.seen?this.readLogs.push(o):this.unreadLogs.push(o)}},n.prototype.getName=function(t){var n=new Date(t.timestamp).toLocaleString();return t.note?"".concat(t.note," (").concat(n,")"):n},n.prototype.deleteMerlinLog=function(t){var n;return g(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return confirm(l.J.get("confirm_delete_merlin_log",this.getName(t)))?[4,this.section.loader.loadJson("".concat(i.Zv,"?type=DeleteMerlinLog&study_id=").concat(null!==(n=this.section.getStaticInt("id"))&&void 0!==n?n:0),"post","timestamp=".concat(t.timestamp))]:[2];case 1:return e.sent(),[4,this.reloadMerlinLogs()];case 2:return e.sent(),window.location.hash="".concat(this.section.getHash(this.section.depth)),[2]}}))}))},n.prototype.markMerlinLogAsSeen=function(t){var n;return g(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,this.section.loader.loadJson("".concat(i.Zv,"?type=ChangeMerlinLog&study_id=").concat(null!==(n=this.section.getStaticInt("id"))&&void 0!==n?n:0),"post","timestamp=".concat(t.timestamp,"&note=").concat(t.note,"&seen=1"))];case 1:return e.sent(),[4,this.reloadMerlinLogs()];case 2:return e.sent(),[2]}}))}))},n.prototype.addNoteToMerlinLog=function(t){var n;return g(this,void 0,void 0,(function(){var e;return p(this,(function(o){switch(o.label){case 0:return(e=prompt(l.J.get("prompt_comment"),t.note))?[4,this.section.loader.loadJson("".concat(i.Zv,"?type=ChangeMerlinLog&study_id=").concat(null!==(n=this.section.getStaticInt("id"))&&void 0!==n?n:0),"post","timestamp=".concat(t.timestamp,"&note=").concat(e,"&seen=").concat(t.seen?1:0))]:[2];case 1:return o.sent(),[4,this.reloadMerlinLogs()];case 2:return o.sent(),[2]}}))}))},n.prototype.getMerlinLogList=function(t){var n=this;return s()("div",{class:"listParent"},s()("div",{class:"listChild error_list"},t.map((function(t){return s()("div",null,(0,h.Pq)(n.deleteMerlinLog.bind(n,t)),!t.seen&&(0,h.$b)(n.markMerlinLogAsSeen.bind(n,t)),s()("a",{onclick:n.addNoteToMerlinLog.bind(n,t)},s().trust(u)),s()("a",{href:n.getUrl("merlinLogView,timestamp:".concat(t.timestamp,",note:").concat(btoa(t.note)))},t.printName),t.seen&&s()("span",{class:"extraNote"},l.J.get("seen")))}))))},n.prototype.getView=function(){return s()("div",null,0==this.readLogs.length&&0==this.unreadLogs.length&&s()("div",null,s()("span",null,l.J.get("no_merlin_logs"))),this.getMerlinLogList(this.unreadLogs),0!=this.readLogs.length&&0!=this.unreadLogs.length&&s()("hr",null),this.getMerlinLogList(this.readLogs))},n}(a.R)},7097:(t,n,e)=>{e.d(n,{R:()=>o});var o=function(){function t(t){this.section=t}return t.preLoad=function(t){return[]},t.prototype.preInit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.resolve()},t.prototype.hasAlternatives=function(){return!1},t.prototype.getAlternatives=function(){return null},t.prototype.titleExtra=function(){return null},t.prototype.getDynamic=function(t,n){return this.section.getDynamic(t,n)},t.prototype.setDynamic=function(t,n){this.section.siteData.dynamicValues.setChild(t,n)},t.prototype.getStaticInt=function(t){return this.section.getStaticInt(t)},t.prototype.getStaticString=function(t){return this.section.getStaticString(t)},t.prototype.getStudyOrNull=function(t){var n,e;void 0===t&&(t=null!==(n=this.getStaticInt("id"))&&void 0!==n?n:-1);var o=this.section.siteData.studyLoader.getStudies();return-1==t?1==o.getCount()&&o.getFirst()||null:null!==(e=o.getEntry(t))&&void 0!==e?e:null},t.prototype.getStudyOrThrow=function(t){var n;void 0===t&&(t=null!==(n=this.getStaticInt("id"))&&void 0!==n?n:-1);var e=this.getStudyOrNull(t);if(!e)throw new Error("Study ".concat(t," does not exist!"));return e},t.prototype.getQuestionnaireOrNull=function(t,n){var e;if(void 0===t&&(t=null!==(e=this.getStaticInt("qId"))&&void 0!==e?e:-1),void 0===n&&(n=this.getStudyOrNull()),!n)return null;for(var o=0,i=this.getStudyOrThrow().questionnaires.get();o<i.length;o++){var r=i[o];if(r.internalId.get()==t)return r}return null},t.prototype.getQuestionnaireOrThrow=function(t){var n;void 0===t&&(t=null!==(n=this.getStaticInt("qId"))&&void 0!==n?n:-1);var e=this.getQuestionnaireOrNull(t,this.getStudyOrThrow());if(e)return e;throw new Error("Questionnaire ".concat(t," does not exist!"))},t.prototype.getTools=function(){return this.section.getTools()},t.prototype.getAdmin=function(){return this.section.getAdmin()},t.prototype.hasPermission=function(t,n){var e;return this.getAdmin().isLoggedIn()&&null!==(e=this.getTools().hasPermission(t,n))&&void 0!==e&&e},t.prototype.getUrl=function(t,n){return void 0===n&&(n=this.section.depth),"".concat(this.section.getHash(n),"/").concat(t)},t.prototype.goTo=function(t){window.location.hash="#"+t},t.prototype.newSection=function(t,n){void 0===n&&(n=this.section.depth),window.location.hash=-1==n?t:"".concat(this.section.getHash(n),"/").concat(t)},t.prototype.destroy=function(){},t}()},6471:(t,n,e)=>{e.d(n,{Wz:()=>w,Qu:()=>y,wj:()=>p,rq:()=>m,$b:()=>L,C9:()=>M,bi:()=>v,OI:()=>b,Pq:()=>f});var o=e(4862),i=e.n(o),r=e(9700);const s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<path d="M0 0h24v24H0z" fill="none"/>\n\t<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>\n</svg>';e(233);var l=e(2570);const c='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><path d="M0,0h24v24H0V0z" fill="none"/><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></g></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/><path d="M0 0h24v24H0z" fill="none"/>\n</svg>',h='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8V4l8 8-8 8v-4H4V8z"/></svg>';var g=e(9291);function p(t,n,e,o){return void 0===e&&(e=""),void 0===o&&(o=""),i()("div",{class:"btn clickable",onclick:n,title:e||o},t,i()("span",{class:"middle smallText"},e))}function v(t,n){return void 0===n&&(n=""),i()("div",{class:"btn btnDelete clickable",onclick:t,title:n||r.J.get("delete")},i().trust(h),i()("span",{class:"smallText highlight middle"},n))}function f(t,n){return void 0===n&&(n=""),i()("div",{class:"btn btnDelete clickable",onclick:t,title:n||r.J.get("delete")},i().trust(g),i()("span",{class:"highlight middle"},n))}function w(t,n){return void 0===n&&(n=""),p(i().trust(s),t,n,r.J.get("add"))}function y(t,n){return void 0===n&&(n=""),p(i().trust(l),t,n,r.J.get("copy"))}function m(t,n){return void 0===n&&(n=""),p(i().trust(c),t,n,r.J.get("change"))}function L(t,n){return void 0===n&&(n=""),p(i().trust(a),t,n,r.J.get("save"))}function M(t,n){return void 0===n&&(n=""),p(i().trust(u),t,n,r.J.get("reload"))}function b(t,n){return void 0===n&&(n=""),p(i().trust(d),t,n,r.J.get("transfer"))}},233:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>'},8202:t=>{t.exports='<svg class="middle" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'},2570:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z"/></svg>'},9291:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"/><path fill="none" d="M0 0h24v24H0z"/></svg>'}}]);
//# sourceMappingURL=2333.1f75476d5dabc0b1c077.js.map