---
authors:
- admin
date: "2020-06-24T00:00:00Z"
lastmod: [":fileModTime", ":default"]
projects: [culture&cognition]
publication_types: ["0"]
summary: How to match the words of a song with the chords in which these words are sung.
tags:
title: Functions to match chords with lyrics in the R package chorrrds
---



<style type="text/css">
pre code, pre, code {
  white-space: pre !important;
  overflow-x: scroll !important;
  word-break: keep-all !important;
  word-wrap: initial !important;
}
</style>
<style type="text/css">
pre {
  white-space: pre !important;
  overflow-y: scroll !important;
  max-height: 50vh !important;
}
</style>
<div id="intro" class="section level1">
<h1>Intro</h1>
<p>One of my PhD projects investigates the impact that songs have on meritocratic beliefs and social inequalities. One of the things that I would like to explore is the potential impact that certain words have when sung in a specific chord. This idea comes from the well-know effect that music (in terms of sounds) has on emotions (Arjmand, Hohagen, Paton, &amp; Rickard 2014) and from the consideration that beliefs are intrinsically multi-sensory. That is, when asking people about their beliefs, the question inevitabily taps the perceptual information that has been encoded and stored during previous experiences. But this is another story.</p>
<p>While thinking through the theoretical aspects, I also spent sometime working the first lines of code to get the data aligned with the way I was thinking. In this process, I encountered the R package <a href="https://r-music.rbind.io/posts/2018-08-19-chords-analysis-with-the-chorrrds-package/"><code>chorrrds</code></a>, built to extract chords from the website <a href="https://www.cifraclub.com.br">Cifraclub</a>. Building upon the functions of this package, I implemented two functions that allow to match the words of a song with the corresponding chords in which these words are sung. In this blog post, I will explain the features of these two functions and how to use them in a practical example.</p>
</div>
<div id="preliminaries" class="section level1">
<h1>Preliminaries</h1>
<p>The package <code>chorrrds</code> can be installed from CRAN, with</p>
<pre class="r"><code>install.packages(&quot;chorrrds&quot;)</code></pre>
<p>and for the latest version, from GitHub with:</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;r-music/chorrrds&quot;)</code></pre>
</div>
<div id="function-1-create_dat" class="section level1">
<h1>Function 1: create_dat</h1>
Generally, this is how a song looks on the internet (specifically, on <a href="https://www.cifraclub.com.br/frank-ocean/sweet-life/">Cifraclub</a>):
<div class="figure"><span id="fig:unnamed-chunk-5"></span>
<img src="/post/Functions_chorrrds/Functions_chorrrds_files/figure-html/unnamed-chunk-5-1.png" alt="Sweet Life by Frank Ocean" width="672" />
<p class="caption">
Figure 1: Sweet Life by Frank Ocean
</p>
</div>
<p>As you can see, each verse is sung with one or more chords. The problem is how to match each word with the corresponding chord in which they are played. For example, in the first verse, “The best song wasn’t the single, but you weren’t either”, the words “The best song wasn’t” are played in A, “the single, but you weren’t” are played in C, and “either” is in G. How to connect each of these words with the corresponding chords A, C, G? The first step consists of having a song divided by verse, both for the chords and the lyrics, something that is achieved with the function <code>create_dat</code>:</p>
<pre class="r"><code>chords.dat &lt;- create_dat(&quot;Frank Ocean&quot;, &quot;Sweet Life&quot;)</code></pre>
<p>This produces the following output:</p>
<pre><code>## # A tibble: 41 x 2
##    chord                                                              lyric                                                                     
##    &lt;chr&gt;                                                              &lt;chr&gt;                                                                     
##  1 &quot;A                        C                            G&quot;          &quot;  The best song wasn&#39;t the single, but you weren&#39;t either&quot;               
##  2 &quot;D                                           A&quot;                    &quot;  Livin&#39; in Ladera Heights, the black Beverly Hills&quot;                     
##  3 &quot;C                                     G   &quot;                       &quot;  Domesticated paradise, palm trees and pools&quot;                           
##  4 &quot;D            &quot;                                                    &quot;  The water&#39;s blue, swallow the pill&quot;                                    
##  5 &quot;A                                C&quot;                               &quot;  Keepin&#39; it surreal, whatever you like&quot;                                 
##  6 &quot;G                             D&quot;                                  &quot;  Whatever feels good, whatever takes you mountain high&quot;                 
##  7 &quot;A                             C&quot;                                  &quot;  Keepin&#39; it surreal, not sugar-free&quot;                                    
##  8 &quot;G                           &quot;                                     &quot;  My TV ain&#39;t HD, that&#39;s too real&quot;                                       
##  9 &quot;D                                               A&quot;                &quot;  Grapevine, mango, peaches, and limes, the sweet life&quot;                  
## 10 &quot;C                     G&quot;                                          &quot;  The sweet life, sweet life&quot;                                            
## 11 &quot;D      &quot;                                                          &quot;  Sweet life, sweet life&quot;                                                
## 12 &quot;A    &quot;                                                            &quot;  The sweet, sweet, sweet, sweet life&quot;                                   
## 13 &quot;C                     G&quot;                                          &quot;  Sweet life, the sweet life&quot;                                            
## 14 &quot;D      &quot;                                                          &quot;  Sweetie pie&quot;                                                           
## 15 &quot;A                                          C&quot;                     &quot;  You&#39;ve had a landscaper and a house keeper since you were born&quot;        
## 16 &quot;G                   D&quot;                                            &quot;  The sunshine always kept you warm&quot;                                     
## 17 &quot;A                                  C&quot;                             &quot;  So why see the world, when you got the beach&quot;                          
## 18 &quot;G                                          D&quot;                     &quot;  Don&#39;t know why see the world, when you got the beach&quot;                  
## 19 &quot;A          &quot;                                                      &quot;  The sweet life&quot;                                                        
## 20 &quot;C                                                           G&quot;    &quot;  The best song wasn&#39;t the single, but you couldn&#39;t turn your radio down&quot;
## 21 &quot;D                                        A&quot;                       &quot;  Satellite need a receiver, can&#39;t seem to turn the signal fully off&quot;    
## 22 &quot;C                G&quot;                                               &quot;  Transmitting the waves&quot;                                                
## 23 &quot;D                     &quot;                                           &quot;  You&#39;re catching that breeze &#39;til you&#39;re dead in the grave&quot;             
## 24 &quot;A                                           C&quot;                    &quot;  But you&#39;re keepin&#39; it surreal, whatever you like&quot;                      
## 25 &quot;G                             D&quot;                                  &quot;  Whatever feels good, whatever takes you mountain high&quot;                 
## 26 &quot;A                             C                                G&quot; &quot;  Keepin&#39; it surreal, not sugar-free, my tv ain&#39;t HD, that&#39;s too real&quot;   
## 27 &quot;D            &quot;                                                    &quot;  Grapevines, mango, peaches, and lime, a sweet life&quot;                    
## 28 &quot;C                      G&quot;                                         &quot;  Live and die in the life&quot;                                              
## 29 &quot;A                                          C&quot;                     &quot;  You&#39;ve had a landscaper and a house keeper since you were born, yeah&quot;  
## 30 &quot;G                   D&quot;                                            &quot;  The sunshine always kept you warm&quot;                                     
## 31 &quot;A                                  C&quot;                             &quot;  So why see the world, when you got the beach&quot;                          
## 32 &quot;G                                          D&quot;                     &quot;  Don&#39;t know why see the world, when you got the beach&quot;                  
## 33 &quot;A                                C&quot;                               &quot;  And the water, is exactly what I wanted&quot;                               
## 34 &quot;G                                  D&quot;                             &quot;  It&#39;s everything I thought it would be (thought it would be)&quot;           
## 35 &quot;A                                C&quot;                               &quot;  But this neighborhood is gettin&#39; trippier every day&quot;                   
## 36 &quot;G                         D&quot;                                      &quot;  The neighborhood is goin&#39; ape shit crazy&quot;                              
## 37 &quot;A                                          C&quot;                     &quot;  You&#39;ve had a landscaper and a house keeper since you were born&quot;        
## 38 &quot;G                   D&quot;                                            &quot;  The sunshine always kept you warm&quot;                                     
## 39 &quot;A                                  C&quot;                             &quot;  So why see the world, when you got the beach&quot;                          
## 40 &quot;G                                          D&quot;                     &quot;  Don&#39;t know why see the world, when you got the beach&quot;                  
## 41 &quot;A          &quot;                                                      &quot;  The sweet life&quot;</code></pre>
</div>
<div id="function-2-create_net" class="section level1">
<h1>Function 2: create_net</h1>
<p>While <code>create_dat</code> allows to have a song as presented on the website, it still does not achieve the intended result. That is, it does not match words with the respective chords. <code>create_net</code> does the job. The idea is to search for each chord the beginning of the closest word, and to store all the words that are present before the end of the verse or the beginning of the next chord. Running:</p>
<pre class="r"><code>create_net(chords.dat)</code></pre>
<p>creates the intended output:</p>
<pre><code>## # A tibble: 75 x 2
##    chord lyric                                                    
##    &lt;chr&gt; &lt;chr&gt;                                                    
##  1 A     The best song wasn&#39;t                                     
##  2 C     the single, but you weren&#39;t                              
##  3 G     either                                                   
##  4 D     Livin&#39; in Ladera Heights, the black Beverl               
##  5 A     Hills                                                    
##  6 C     Domesticated paradise, palm trees                        
##  7 G     and pools                                                
##  8 D     The water&#39;s blue, swallow the pill                       
##  9 A     Keepin&#39; it surreal, whatever                             
## 10 C     you like                                                 
## 11 G     Whatever feels good, whateve                             
## 12 D     takes you mountain high                                  
## 13 A     Keepin&#39; it surreal, not                                  
## 14 C     sugar free                                               
## 15 G     My TV ain&#39;t HD, that&#39;s too real                          
## 16 D     Grapevine, mango, peaches, and limes, the                
## 17 A     sweet life                                               
## 18 C     The sweet life,                                          
## 19 G     sweet life                                               
## 20 D     Sweet life, sweet life                                   
## 21 A     The sweet, sweet, sweet, sweet life                      
## 22 C     Sweet life, the                                          
## 23 G     sweet life                                               
## 24 D     Sweetie pie                                              
## 25 A     You&#39;ve had a landscaper and a house keepe                
## 26 C     since you were born                                      
## 27 G     The sunshine alway                                       
## 28 D     kept you warm                                            
## 29 A     So why see the world, when you                           
## 30 C     got the beach                                            
## 31 G     Don&#39;t know why see the world, when you                   
## 32 D     got the beach                                            
## 33 A     The sweet life                                           
## 34 C     The best song wasn&#39;t the single, but you couldn&#39;t turn   
## 35 G     your radio down                                          
## 36 D     Satellite need a receiver, can&#39;t seem                    
## 37 A     to turn the signal fully off                             
## 38 C     Transmitting                                             
## 39 G     the waves                                                
## 40 D     You&#39;re catching that breeze &#39;til you&#39;re dead in the grave
## 41 A     But you&#39;re keepin&#39; it surreal, whatever                  
## 42 C     you like                                                 
## 43 G     Whatever feels good, whateve                             
## 44 D     takes you mountain high                                  
## 45 A     Keepin&#39; it surreal, not                                  
## 46 C     sugar free, my tv ain&#39;t HD, that&#39;s                       
## 47 G     too real                                                 
## 48 D     Grapevines, mango, peaches, and lime, a sweet life       
## 49 C     Live and die in the                                      
## 50 G     life                                                     
## 51 A     You&#39;ve had a landscaper and a house keepe                
## 52 C     since you were born, yeah                                
## 53 G     The sunshine alway                                       
## 54 D     kept you warm                                            
## 55 A     So why see the world, when you                           
## 56 C     got the beach                                            
## 57 G     Don&#39;t know why see the world, when you                   
## 58 D     got the beach                                            
## 59 A     And the water, is exactly what                           
## 60 C     I wanted                                                 
## 61 G     It&#39;s everything I thought it                             
## 62 D     would be (thought it would be)                           
## 63 A     But this neighborhood is gettin                          
## 64 C     trippier every day                                       
## 65 G     The neighborhood is                                      
## 66 D     goin&#39; ape shit crazy                                     
## 67 A     You&#39;ve had a landscaper and a house keepe                
## 68 C     since you were born                                      
## 69 G     The sunshine alway                                       
## 70 D     kept you warm                                            
## 71 A     So why see the world, when you                           
## 72 C     got the beach                                            
## 73 G     Don&#39;t know why see the world, when you                   
## 74 D     got the beach                                            
## 75 A     The sweet life</code></pre>
<p>Note that <code>create_net</code> builds upon the structure created with <code>create_dat</code>.</p>
</div>
<div id="usage" class="section level1">
<h1>Usage</h1>
<p>These functions can be very useful for text, network, and many others types of analyses. For example, it could be useful for a network viz.</p>
<ol style="list-style-type: decimal">
<li>Create a adjacency matrix with words connected to each other when played under the same chord.</li>
</ol>
<pre><code>## # A tibble: 326 x 2
##     chord lyric       
##     &lt;chr&gt; &lt;chr&gt;       
##   1 A     The         
##   2 A     best        
##   3 A     song        
##   4 A     wasn&#39;t      
##   5 C     the         
##   6 C     single,     
##   7 C     but         
##   8 C     you         
##   9 C     weren&#39;t     
##  10 G     either      
##  11 D     Livin&#39;      
##  12 D     in          
##  13 D     Ladera      
##  14 D     Heights,    
##  15 D     the         
##  16 D     black       
##  17 D     Beverl      
##  18 A     Hills       
##  19 C     Domesticated
##  20 C     paradise,   
##  21 C     palm        
##  22 C     trees       
##  23 G     and         
##  24 G     pools       
##  25 D     The         
##  26 D     water&#39;s     
##  27 D     blue,       
##  28 D     swallow     
##  29 D     the         
##  30 D     pill        
##  31 A     Keepin&#39;     
##  32 A     it          
##  33 A     surreal,    
##  34 A     whatever    
##  35 C     you         
##  36 C     like        
##  37 G     Whatever    
##  38 G     feels       
##  39 G     good,       
##  40 G     whateve     
##  41 D     takes       
##  42 D     you         
##  43 D     mountain    
##  44 D     high        
##  45 A     Keepin&#39;     
##  46 A     it          
##  47 A     surreal,    
##  48 A     not         
##  49 C     sugar       
##  50 C     free        
##  51 G     My          
##  52 G     TV          
##  53 G     ain&#39;t       
##  54 G     HD,         
##  55 G     that&#39;s      
##  56 G     too         
##  57 G     real        
##  58 D     Grapevine,  
##  59 D     mango,      
##  60 D     peaches,    
##  61 D     and         
##  62 D     limes,      
##  63 D     the         
##  64 A     sweet       
##  65 A     life        
##  66 C     The         
##  67 C     sweet       
##  68 C     life,       
##  69 G     sweet       
##  70 G     life        
##  71 D     Sweet       
##  72 D     life,       
##  73 D     sweet       
##  74 D     life        
##  75 A     The         
##  76 A     sweet,      
##  77 A     sweet,      
##  78 A     sweet,      
##  79 A     sweet       
##  80 A     life        
##  81 C     Sweet       
##  82 C     life,       
##  83 C     the         
##  84 G     sweet       
##  85 G     life        
##  86 D     Sweetie     
##  87 D     pie         
##  88 A     You&#39;ve      
##  89 A     had         
##  90 A     a           
##  91 A     landscaper  
##  92 A     and         
##  93 A     a           
##  94 A     house       
##  95 A     keepe       
##  96 C     since       
##  97 C     you         
##  98 C     were        
##  99 C     born        
## 100 G     The         
## 101 G     sunshine    
## 102 G     alway       
## 103 D     kept        
## 104 D     you         
## 105 D     warm        
## 106 A     So          
## 107 A     why         
## 108 A     see         
## 109 A     the         
## 110 A     world,      
## 111 A     when        
## 112 A     you         
## 113 C     got         
## 114 C     the         
## 115 C     beach       
## 116 G     Don&#39;t       
## 117 G     know        
## 118 G     why         
## 119 G     see         
## 120 G     the         
## 121 G     world,      
## 122 G     when        
## 123 G     you         
## 124 D     got         
## 125 D     the         
## 126 D     beach       
## 127 A     The         
## 128 A     sweet       
## 129 A     life        
## 130 C     The         
## 131 C     best        
## 132 C     song        
## 133 C     wasn&#39;t      
## 134 C     the         
## 135 C     single,     
## 136 C     but         
## 137 C     you         
## 138 C     couldn&#39;t    
## 139 G     your        
## 140 G     radio       
## 141 G     down        
## 142 D     Satellite   
## 143 D     need        
## 144 D     a           
## 145 D     receiver,   
## 146 D     can&#39;t       
## 147 D     seem        
## 148 A     to          
## 149 A     turn        
## 150 A     the         
## 151 A     signal      
## 152 A     fully       
## 153 A     off         
## 154 C     Transmitting
## 155 G     the         
## 156 G     waves       
## 157 D     You&#39;re      
## 158 D     catching    
## 159 D     that        
## 160 D     breeze      
## 161 D     &#39;til        
## 162 D     you&#39;re      
## 163 D     dead        
## 164 D     in          
## 165 D     the         
## 166 A     But         
## 167 A     you&#39;re      
## 168 A     keepin&#39;     
## 169 A     it          
## 170 A     surreal,    
## 171 A     whatever    
## 172 C     you         
## 173 C     like        
## 174 G     Whatever    
## 175 G     feels       
## 176 G     good,       
## 177 G     whateve     
## 178 D     takes       
## 179 D     you         
## 180 D     mountain    
## 181 D     high        
## 182 A     Keepin&#39;     
## 183 A     it          
## 184 A     surreal,    
## 185 A     not         
## 186 C     sugar       
## 187 C     free,       
## 188 C     my          
## 189 C     tv          
## 190 C     ain&#39;t       
## 191 C     HD,         
## 192 C     that&#39;s      
## 193 G     too         
## 194 G     real        
## 195 D     Grapevines, 
## 196 D     mango,      
## 197 D     peaches,    
## 198 D     and         
## 199 D     lime,       
## 200 D     a           
## 201 D     sweet       
## 202 D     life        
## 203 C     Live        
## 204 C     and         
## 205 C     die         
## 206 C     in          
## 207 C     the         
## 208 G     life        
## 209 A     You&#39;ve      
## 210 A     had         
## 211 A     a           
## 212 A     landscaper  
## 213 A     and         
## 214 A     a           
## 215 A     house       
## 216 A     keepe       
## 217 C     since       
## 218 C     you         
## 219 C     were        
## 220 C     born,       
## 221 C     yeah        
## 222 G     The         
## 223 G     sunshine    
## 224 G     alway       
## 225 D     kept        
## 226 D     you         
## 227 D     warm        
## 228 A     So          
## 229 A     why         
## 230 A     see         
## 231 A     the         
## 232 A     world,      
## 233 A     when        
## 234 A     you         
## 235 C     got         
## 236 C     the         
## 237 C     beach       
## 238 G     Don&#39;t       
## 239 G     know        
## 240 G     why         
## 241 G     see         
## 242 G     the         
## 243 G     world,      
## 244 G     when        
## 245 G     you         
## 246 D     got         
## 247 D     the         
## 248 D     beach       
## 249 A     And         
## 250 A     the         
## 251 A     water,      
## 252 A     is          
## 253 A     exactly     
## 254 A     what        
## 255 C     I           
## 256 C     wanted      
## 257 G     It&#39;s        
## 258 G     everything  
## 259 G     I           
## 260 G     thought     
## 261 G     it          
## 262 D     would       
## 263 D     be          
## 264 D     (thought    
## 265 D     it          
## 266 D     would       
## 267 D     be)         
## 268 A     But         
## 269 A     this        
## 270 A     neighborhood
## 271 A     is          
## 272 A     gettin      
## 273 C     trippier    
## 274 C     every       
## 275 C     day         
## 276 G     The         
## 277 G     neighborhood
## 278 G     is          
## 279 D     goin&#39;       
## 280 D     ape         
## 281 D     shit        
## 282 D     crazy       
## 283 A     You&#39;ve      
## 284 A     had         
## 285 A     a           
## 286 A     landscaper  
## 287 A     and         
## 288 A     a           
## 289 A     house       
## 290 A     keepe       
## 291 C     since       
## 292 C     you         
## 293 C     were        
## 294 C     born        
## 295 G     The         
## 296 G     sunshine    
## 297 G     alway       
## 298 D     kept        
## 299 D     you         
## 300 D     warm        
## 301 A     So          
## 302 A     why         
## 303 A     see         
## 304 A     the         
## 305 A     world,      
## 306 A     when        
## 307 A     you         
## 308 C     got         
## 309 C     the         
## 310 C     beach       
## 311 G     Don&#39;t       
## 312 G     know        
## 313 G     why         
## 314 G     see         
## 315 G     the         
## 316 G     world,      
## 317 G     when        
## 318 G     you         
## 319 D     got         
## 320 D     the         
## 321 D     beach       
## 322 A     The         
## 323 A     sweet       
## 324 A     life        
## 325 C     turn        
## 326 D     grave</code></pre>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>A special thanks to <a href="https://github.com/brunaw">Bruna Wundervald</a>, the developer of the <code>chorrrds</code> package, for the help and for the inclusion of these functions in her package :)
Another special thanks to Edo for the help during the code writing process :)</p>
<p>P.S. I am not a programmer, so (1) the code looks bad, and (2) it might have issues. So, if you encounter any problem with the functions, want to give suggestions about how to improve the code, or just want to rant about stuff, drop me a line! I’ll be happy to further break my head around it.</p>
<div id="bibliography" class="section level2">
<h2>Bibliography</h2>
<p>Arjmand, H.-A., Hohagen, J., Paton, B., &amp; Rickard, N. S. (2017). Emotional Responses to Music: Shifts in Frontal Brain Asymmetry Mark Periods of Musical Change. Frontiers in Psychology, 8. <a href="https://doi.org/10.3389/fpsyg.2017.02044" class="uri">https://doi.org/10.3389/fpsyg.2017.02044</a></p>
</div>
</div>
